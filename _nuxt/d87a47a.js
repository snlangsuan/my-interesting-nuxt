(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{568:function(t,e,n){var content=n(653);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(25).default)("8744fd06",content,!0,{sourceMap:!1})},652:function(t,e,n){"use strict";n(568)},653:function(t,e,n){var r=n(24)(!1);r.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Kanit:wght@100;300;400;500;600;700&display=swap);"]),r.push([t.i,".bbox__container[data-v-519d5070]{display:flex;align-items:center;justify-content:center;background-color:rgba(0,0,0,.04)}",""]),t.exports=r},728:function(t,e,n){"use strict";n.r(e);var r=n(27);n(91),n(28),n(72),n(47),n(6),n(32),n(62),n(48),n(26),n(9),n(63),n(66),n(49);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,h=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return h=t.done,t},e:function(t){l=!0,o=t},f:function(){try{h||null==n.return||n.return()}finally{if(l)throw o}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var h={name:"BoundingBoxCanvas",props:{width:{type:Number,default:100},height:{type:Number,default:100},src:{type:String,default:null},bboxes:{type:Array,default:function(){return[]}}},data:function(){return{stageConfig:{width:100,height:100,scaleX:.5,scaleY:.5},imageConfig:{image:null,width:100,height:100,x:0,y:0},shapes:[],imageFactor:1}},watch:{src:function(t){this.loadImage(t)},bboxes:function(t){this.loadBox(t)}},mounted:function(){this.loadImage(this.src),this.loadBox(this.bboxes)},methods:{loadImage:function(t){var e=this;if(t){var image=new Image;image.onload=function(){console.log("image size:",image.width,image.height);var t=Math.min(e.width/image.width,e.height/image.height);e.imageFactor=t;var n=e.calculateAspectRatioFit(image.width,image.height,e.width,e.height);e.stageConfig.width=n.width,e.stageConfig.height=n.height,e.stageConfig.scaleX=1*t,e.stageConfig.scaleY=1*t,e.imageConfig.image=image,e.imageConfig.width=image.width,e.imageConfig.height=image.height},image.src=t}},loadBox:function(t){if(Array.isArray(t)){var e=t.map((function(t,i){return{rotation:0,x:t.rectangle.x,y:t.rectangle.y,width:t.rectangle.width,height:t.rectangle.height,stroke:t.color,fill:t.color,strokeWidth:5,opacity:.4}}));console.log(e),this.shapes=e}},calculateAspectRatioFit:function(t,e,n,r){var o=Math.min(n/t,r/e);return{width:t*o,height:e*o}},getImageData:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c,h,l,f,d,m,w,y,v,x,img;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.$refs.background.getNode(),c=r.width()/e.stageConfig.width,h=r.height()/e.stageConfig.height,l=[],f=o(t),n.prev=5,f.s();case 7:if((d=f.n()).done){n.next=19;break}return m=d.value,w=parseInt(Math.round(m.rectangle.x/c)),y=parseInt(Math.round(m.rectangle.y/h)),v=parseInt(Math.round(m.rectangle.width/c)),x=parseInt(Math.round(m.rectangle.height/h)),n.next=15,r.toImage({x:w,y:y,width:v,height:x});case 15:img=n.sent,l.push(img);case 17:n.next=7;break;case 19:n.next=24;break;case 21:n.prev=21,n.t0=n.catch(5),f.e(n.t0);case 24:return n.prev=24,f.f(),n.finish(24);case 27:return n.abrupt("return",l);case 28:case"end":return n.stop()}}),n,null,[[5,21,24,27]])})))()},reset:function(){this.imageConfig.image=null,this.shapes=[]}}},l=(n(652),n(67)),component=Object(l.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bbox__container",style:{width:t.width+"px",height:t.height+"px"}},[n("v-stage",{ref:"stage",staticClass:"bbox__stage",attrs:{config:t.stageConfig}},[n("v-layer",{ref:"layer"},[n("v-image",{ref:"background",attrs:{config:t.imageConfig}}),t._v(" "),t._l(t.shapes,(function(t,i){return[n("v-rect",{key:"shape-"+i,attrs:{config:t}})]}))],2)],1)],1)}),[],!1,null,"519d5070",null);e.default=component.exports}}]);