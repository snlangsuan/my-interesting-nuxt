(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{761:function(t,e,n){var content=n(805);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(56).default)("4bd70fc2",content,!0,{sourceMap:!1})},804:function(t,e,n){"use strict";n(761)},805:function(t,e,n){var r=n(55)(!1);r.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Kanit:wght@100;300;400;500;600;700&display=swap);"]),r.push([t.i,".bbox__container[data-v-dc37180c]{display:flex;align-items:center;justify-content:center;background-color:rgba(0,0,0,.04)}",""]),t.exports=r},889:function(t,e,n){"use strict";n.r(e);var r=n(63);n(187),n(65),n(150),n(96),n(25),n(69),n(128),n(95),n(57),n(37),n(129),n(137),n(97);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){f=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(f)throw o}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var c={name:"BoundingBoxCanvas",props:{width:{type:Number,default:100},height:{type:Number,default:100},src:{type:String,default:null},bboxes:{type:Array,default:function(){return[]}}},data:function(){return{stageConfig:{width:100,height:100,scaleX:.5,scaleY:.5},imageConfig:{image:null,width:100,height:100,x:0,y:0},shapes:[],imageFactor:1}},watch:{src:function(t){this.loadImage(t)},bboxes:function(t){this.loadBox(t)},width:function(t){this.updateStageSize()}},mounted:function(){this.loadImage(this.src),this.loadBox(this.bboxes)},methods:{loadImage:function(t){var e=this;if(t){var image=new Image;image.onload=function(){e.imageConfig.image=image,e.imageConfig.width=image.width,e.imageConfig.height=image.height,e.updateStageSize()},image.src=t}},loadBox:function(t){if(Array.isArray(t)){var e=t.map((function(t,i){return{rotation:0,x:t.rectangle.x,y:t.rectangle.y,width:t.rectangle.width,height:t.rectangle.height,stroke:t.color,fill:t.color,strokeWidth:5,opacity:.6,$index:t.$index,$id:t.id}}));this.shapes=e}},updateStageSize:function(){var t=Math.min(this.width/this.imageConfig.width,this.height/this.imageConfig.height);this.imageFactor=t;var e=this.calculateAspectRatioFit(this.imageConfig.width,this.imageConfig.height,this.width,this.height);this.stageConfig.width=e.width,this.stageConfig.height=e.height,this.stageConfig.scaleX=1*t,this.stageConfig.scaleY=1*t},calculateAspectRatioFit:function(t,e,n,r){var o=Math.min(n/t,r/e);return{width:t*o,height:e*o}},getImageData:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,h,c,f,l,d,m,y,w,v,x,img;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.$refs.background.getNode(),h=r.width()/e.stageConfig.width,c=r.height()/e.stageConfig.height,f=[],l=o(t),n.prev=5,l.s();case 7:if((d=l.n()).done){n.next=19;break}return m=d.value,y=parseInt(Math.round(m.rectangle.x/h)),w=parseInt(Math.round(m.rectangle.y/c)),v=parseInt(Math.round(m.rectangle.width/h)),x=parseInt(Math.round(m.rectangle.height/c)),n.next=15,r.toImage({x:y,y:w,width:v,height:x,mimeType:"image/jpeg"});case 15:img=n.sent,f.push(img);case 17:n.next=7;break;case 19:n.next=24;break;case 21:n.prev=21,n.t0=n.catch(5),l.e(n.t0);case 24:return n.prev=24,l.f(),n.finish(24);case 27:return n.abrupt("return",f);case 28:case"end":return n.stop()}}),n,null,[[5,21,24,27]])})))()},reset:function(){this.imageConfig.image=null,this.shapes=[]}}},f=(n(804),n(138)),component=Object(f.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bbox__container",style:{width:t.width+"px",height:t.height+"px"}},[n("v-stage",{ref:"stage",staticClass:"bbox__stage",attrs:{config:t.stageConfig}},[n("v-layer",{ref:"layer"},[n("v-image",{ref:"background",attrs:{config:t.imageConfig}}),t._v(" "),t._l(t.shapes,(function(e){return[n("v-rect",{key:"shape-"+e.$id,attrs:{config:e}}),t._v(" "),n("v-text",{key:"text-"+e.$id,attrs:{config:{text:"P"+(e.$index+1),x:e.x+4,y:e.y+4,fontSize:14,fill:"#ffffff"}}})]}))],2)],1)],1)}),[],!1,null,"dc37180c",null);e.default=component.exports}}]);