(window.webpackJsonp=window.webpackJsonp||[]).push([[12,6,11],{567:function(t,e,n){var content=n(651);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(25).default)("6a2f6dac",content,!0,{sourceMap:!1})},568:function(t,e,n){var content=n(653);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(25).default)("8744fd06",content,!0,{sourceMap:!1})},650:function(t,e,n){"use strict";n(567)},651:function(t,e,n){var r=n(24)(!1);r.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Kanit:wght@100;300;400;500;600;700&display=swap);"]),r.push([t.i,".upload-field[data-v-174f0075]{position:relative}.upload-field__wrap[data-v-174f0075]{border:thin dashed #1967d2!important;border-radius:4px;padding:8px;display:flex;align-items:center;cursor:pointer;position:relative;margin-bottom:4px;width:100%;height:240px;background-color:#e8f0fe;overflow:hidden}.upload-field--error[data-v-174f0075]{border:2px solid #ff5252!important}.upload-field__disabled[data-v-174f0075]{position:absolute;top:0;bottom:0;left:0;right:0}.upload-field__details[data-v-174f0075]{margin-bottom:8px;padding:0 12px;display:flex;flex:1 0 auto;max-width:100%;min-height:14px;overflow:hidden}.upload-field__details--hide[data-v-174f0075]{display:none!important}.upload-field--readonly[data-v-174f0075]{cursor:auto}.upload-field__input[data-v-174f0075]{z-index:9;width:100%;opacity:0}.upload-field__img[data-v-174f0075],.upload-field__input[data-v-174f0075]{position:absolute;top:0;left:0;right:0;bottom:0}.upload-field__text[data-v-174f0075]{flex:100%;position:relative;text-align:center}.upload-field--error>.upload-field__text>*>*[data-v-174f0075]{color:#dd2c00}.upload-field__wrap:not(.upload-field--disabled) .upload-field__remove>*[data-v-174f0075]{color:#dd2c00!important}.upload-field__wrap:not(.upload-field--error):not(.upload-field--disabled):hover>.upload-field__text>*>*[data-v-174f0075]{color:#1aa24e}",""]),t.exports=r},652:function(t,e,n){"use strict";n(568)},653:function(t,e,n){var r=n(24)(!1);r.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Kanit:wght@100;300;400;500;600;700&display=swap);"]),r.push([t.i,".bbox__container[data-v-519d5070]{display:flex;align-items:center;justify-content:center;background-color:rgba(0,0,0,.04)}",""]),t.exports=r},662:function(t,e){},663:function(t,e){},671:function(t,e){},711:function(t,e){},712:function(t,e){},713:function(t,e){},714:function(t,e,n){"use strict";n.r(e),n.d(e,"dotp",(function(){return r})),n.d(e,"cosineSimilarity",(function(){return o}));n(6),n(72);var r=function(t,e){return t.map((function(a,i){return t[i]*e[i]})).reduce((function(a,b){return a+b}),0)},o=function(a,b){return r(a,b)/(Math.sqrt(r(a,a))*Math.sqrt(r(b,b)))}},715:function(t,e,n){var content=n(792);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(25).default)("0f332269",content,!0,{sourceMap:!1})},727:function(t,e,n){"use strict";n.r(e);n(47),n(6),n(32),n(62),n(48),n(26),n(9),n(63),n(66),n(49);var r=n(21),o=n(716),l=n.n(o);function d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,d=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){d=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(d)throw o}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var f={name:"UploadImageField",extends:n(522).a,inject:{form:{default:null}},props:{value:{type:String,default:""},src:{type:String,default:""},addText:{type:String,default:"เพิ่มภาพ"},removeText:{type:String,default:"นำออก"},accept:{type:String,default:"image/png,image/jpg"}},data:function(){return{url:"",localValue:"",originalFile:null}},watch:{value:function(t){this.localValue=t},src:function(t){this.url=t}},mounted:function(){this.valid=!0,this.url=this.src,this.localValue=this.value},created:function(){this.form&&this.form.register(this)},beforeDestroy:function(){this.form&&this.form.unregister(this)},methods:{validate:function(t,e){if(t){var n=[];e=e||this.localValue,t&&(this.hasInput=this.hasFocused=!0);var o,l=d(this.rules);try{for(l.s();!(o=l.n()).done;){var c=o.value,f="function"==typeof c?c(e):c;"string"==typeof f?n.push(f):"boolean"!=typeof f&&console.error("Rules should return a string or boolean, received '".concat(Object(r.a)(f),"' instead"),this)}}catch(t){l.e(t)}finally{l.f()}return this.errorBucket=n,this.valid=0===n.length,this.valid}},reset:function(){this.valid=!0,this.url="",this.localValue="",this.originalFile=null,this.errorBucket=[],this.$emit("input",this.localValue)},resetValidation:function(){this.valid=!0,this.errorBucket=[]},getOriginalFile:function(){return this.originalFile},onRemove:function(){this.disabled||(this.url="",this.localValue="",this.originalFile=null,this.$emit("input",this.localValue),this.validate(!0,this.localValue))},onSelectImage:function(){this.disabled||this.$refs.picture_upload.click()},onChangeImage:function(){var t=this,input=this.$refs.picture_upload.files;if(input&&input[0])new l.a(input[0],{convertSize:5e6,maxWidth:1040,success:function(e){var n=new FileReader;n.onload=function(n){t.localValue=n.target.result,t.$emit("input",t.localValue),t.$emit("change",t.localValue,e),t.$refs.picture_upload.value=null,t.$refs.picture_upload.type="text",t.$refs.picture_upload.type="file",t.validate(!0,t.localValue)},n.readAsDataURL(e),t.originalFile=e}})},onToggleAction:function(){this.readOnly||this.disabled||this.onSelectImage()}}},v=(n(650),n(67)),h=n(80),m=n.n(h),_=n(198),x=n(170),y=n(509),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-field"},[n("div",{class:["upload-field__wrap",{"upload-field--error":!t.valid,"upload-field--disabled":t.disabled}],on:{click:t.onToggleAction}},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"picture_upload",staticClass:"upload-field__input",attrs:{type:"file",alt:"",title:"",accept:t.accept},on:{input:t.onChangeImage}}),t._v(" "),t.localValue?n("div",{staticClass:"upload-field__img"},[n("v-img",{staticClass:"grey lighten-4",attrs:{src:t.localValue,width:"100%",height:"100%",contain:""}})],1):t.src?n("div",[n("v-img",{staticClass:"grey lighten-4",attrs:{src:t.url,width:"100%",height:"100%",contain:""}})],1):n("div",{class:["upload-field__text"]},[n("div",{staticClass:"mx-auto mt-4"},[n("v-icon",{attrs:{color:"#1967d2",size:"18",left:""}},[t._v("mdi-tray-arrow-up")]),t._v(" "),n("span",{staticClass:"text-body-2",staticStyle:{color:"#1967d2"}},[t._v(t._s(t.addText))])],1)])]),t._v(" "),n("div",{class:["upload-field__details",{"upload-field__details--hide":t.hideDetails}]},[t.errorBucket.length<1&&t.hint&&(t.persistentHint||t.isFocused)?n("VMessages",{attrs:{value:[t.hint]}}):t._e(),t._v(" "),n("VMessages",{attrs:{value:t.errorBucket,color:"error"}})],1)])}),[],!1,null,"174f0075",null);e.default=component.exports;m()(component,{VIcon:_.a,VImg:x.a,VMessages:y.a})},728:function(t,e,n){"use strict";n.r(e);var r=n(27);n(91),n(28),n(72),n(47),n(6),n(32),n(62),n(48),n(26),n(9),n(63),n(66),n(49);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,d=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return d=t.done,t},e:function(t){c=!0,o=t},f:function(){try{d||null==n.return||n.return()}finally{if(c)throw o}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var d={name:"BoundingBoxCanvas",props:{width:{type:Number,default:100},height:{type:Number,default:100},src:{type:String,default:null},bboxes:{type:Array,default:function(){return[]}}},data:function(){return{stageConfig:{width:100,height:100,scaleX:.5,scaleY:.5},imageConfig:{image:null,width:100,height:100,x:0,y:0},shapes:[],imageFactor:1}},watch:{src:function(t){this.loadImage(t)},bboxes:function(t){this.loadBox(t)}},mounted:function(){this.loadImage(this.src),this.loadBox(this.bboxes)},methods:{loadImage:function(t){var e=this;if(t){var image=new Image;image.onload=function(){console.log("image size:",image.width,image.height);var t=Math.min(e.width/image.width,e.height/image.height);e.imageFactor=t;var n=e.calculateAspectRatioFit(image.width,image.height,e.width,e.height);e.stageConfig.width=n.width,e.stageConfig.height=n.height,e.stageConfig.scaleX=1*t,e.stageConfig.scaleY=1*t,e.imageConfig.image=image,e.imageConfig.width=image.width,e.imageConfig.height=image.height},image.src=t}},loadBox:function(t){if(Array.isArray(t)){var e=t.map((function(t,i){return{rotation:0,x:t.rectangle.x,y:t.rectangle.y,width:t.rectangle.width,height:t.rectangle.height,stroke:t.color,fill:t.color,strokeWidth:5,opacity:.4}}));console.log(e),this.shapes=e}},calculateAspectRatioFit:function(t,e,n,r){var o=Math.min(n/t,r/e);return{width:t*o,height:e*o}},getImageData:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,l,d,c,f,v,h,m,_,x,y,img;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.$refs.background.getNode(),l=r.width()/e.stageConfig.width,d=r.height()/e.stageConfig.height,c=[],f=o(t),n.prev=5,f.s();case 7:if((v=f.n()).done){n.next=19;break}return h=v.value,m=parseInt(Math.round(h.rectangle.x/l)),_=parseInt(Math.round(h.rectangle.y/d)),x=parseInt(Math.round(h.rectangle.width/l)),y=parseInt(Math.round(h.rectangle.height/d)),n.next=15,r.toImage({x:m,y:_,width:x,height:y});case 15:img=n.sent,c.push(img);case 17:n.next=7;break;case 19:n.next=24;break;case 21:n.prev=21,n.t0=n.catch(5),f.e(n.t0);case 24:return n.prev=24,f.f(),n.finish(24);case 27:return n.abrupt("return",c);case 28:case"end":return n.stop()}}),n,null,[[5,21,24,27]])})))()},reset:function(){this.imageConfig.image=null,this.shapes=[]}}},c=(n(652),n(67)),component=Object(c.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bbox__container",style:{width:t.width+"px",height:t.height+"px"}},[n("v-stage",{ref:"stage",staticClass:"bbox__stage",attrs:{config:t.stageConfig}},[n("v-layer",{ref:"layer"},[n("v-image",{ref:"background",attrs:{config:t.imageConfig}}),t._v(" "),t._l(t.shapes,(function(t,i){return[n("v-rect",{key:"shape-"+i,attrs:{config:t}})]}))],2)],1)],1)}),[],!1,null,"519d5070",null);e.default=component.exports},791:function(t,e,n){"use strict";n(715)},792:function(t,e,n){var r=n(24)(!1);r.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Kanit:wght@100;300;400;500;600;700&display=swap);"]),r.push([t.i,".ad-detection-page[data-v-909ad54e]{padding:8px;display:flex;align-items:center;justify-content:center}.ad-detection-database[data-v-909ad54e]{padding-top:8px;display:flex}.ad-detection-database-list[data-v-909ad54e]{overflow:hidden;overflow-x:auto;margin-left:8px;display:flex}.ad-detection-database-item[data-v-909ad54e]{width:58px;height:58px}.ad-detection-database-list>.ad-detection-database-item+.ad-detection-database-item[data-v-909ad54e]{margin-left:4px}.ad-detection-workspace[data-v-909ad54e]{display:flex}.ad-detection-workspace__canvas[data-v-909ad54e]{flex:0}.ad-detection-workspace__output[data-v-909ad54e]{flex:1}.ad-detection__overlay-box[data-v-909ad54e]{min-width:320px;text-align:center;background-color:#fff;padding:32px 16px;color:#212121;border-radius:4px}.ad-detection__container[data-v-909ad54e]{max-width:800px;width:100%;margin:auto}.ad-detection-upload-btn[data-v-909ad54e]{width:72px;height:58px;padding:4px 8px;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#e8f0fe;border-radius:4px;cursor:pointer;position:relative}.ad-detection-upload-btn>input[data-v-909ad54e]{display:none}.ad-detection-upload-btn>.ad-detection-upload-btn__text[data-v-909ad54e],.ad-detection-upload-btn>i[data-v-909ad54e]{color:#1967d2}.ad-detection-upload-btn>.ad-detection-upload-btn__text[data-v-909ad54e]{font-size:.8rem}.ad-detection-upload-btn[data-v-909ad54e]:hover{background-color:#d2e3fc}.ad-detection-results[data-v-909ad54e]{overflow:hidden;overflow-y:auto;margin-left:16px}.ad-detection-results__title[data-v-909ad54e]{font-size:1.1rem;font-weight:600}.ad-detection-results__item[data-v-909ad54e]{display:flex;align-items:center;padding:16px 0}.ad-detection-results__color-box[data-v-909ad54e]{width:20px;height:20px;margin-right:8px}.ad-detection-results__label[data-v-909ad54e]{margin-right:8px;max-width:30%;width:30%}.ad-detection-results__percent[data-v-909ad54e]{flex:1}",""]),t.exports=r},842:function(t,e,n){"use strict";n.r(e);n(94),n(12),n(9),n(10),n(17),n(11),n(18);var r=n(3),o=n(27),l=n(51),d=n(44),c=n(31),f=n(37),v=n(36),h=(n(26),n(79),n(72),n(138),n(6),n(91),n(726)),m=n(790),_=n(714);function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function y(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(c.a)(t);if(e){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var k=Object(f.a)((function t(e){return Object(v.a)(this,t),h.f.l1l2(e)}));k.className="L2",h.i.registerClass(k);var D=function(t){Object(l.a)(n,t);var e=w(n);function n(){return Object(v.a)(this,n),e.call(this,{})}return Object(f.a)(n,null,[{key:"className",get:function(){return"Lambda"}}]),n}(h.c.Layer);h.i.registerClass(D);var C={name:"AdDetectionPage",layout:"ml",data:function(){return{title:"Ad Detection",databases:[],uploadDatabaseDialog:!1,createDatabaseValid:!0,createDatabase:{label:"",img:""},initializing:!0,databaseUploading:!1,testUploading:!1,isPreviewUploaded:!1,embeddingModel:null,canvasWidth:100,canvasHeight:100,testImg:null,bboxes:[],knn:null}},head:function(){return{title:this.title}},mounted:function(){this.initialize()},methods:{initialize:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.initializing=!0,!localStorage.getItem("detection-offline-ad")){e.next=10;break}return e.next=6,h.d("indexeddb://detection-offline-ad");case 6:n=e.sent,t.embeddingModel=n,e.next=17;break;case 10:return e.next=12,h.d("/models/detection-offline-ad/model.json");case 12:return r=e.sent,t.embeddingModel=r,e.next=16,r.save("indexeddb://detection-offline-ad");case 16:localStorage.setItem("detection-offline-ad",!0);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error(e.t0);case 22:return e.prev=22,t.initializing=!1,e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[0,19,22,25]])})))()},onResize:function(){var t=document.querySelector("#workspace");if(t){var e=t.offsetWidth-32;this.canvasWidth=Math.round(.6*e),this.canvasHeight=this.canvasWidth,console.log(e)}},resizeCanvas:function(){var t=document.querySelector("#workspace");t&&console.log(t.offsetWidth)},handleAddDatabase:function(){var t=this;if(this.$refs.database_form.validate())try{var e=JSON.parse(JSON.stringify(this.createDatabase));this.uploadDatabaseDialog=!1,this.databaseUploading=!0;var image=new Image;image.onload=function(){var n=t.getEmbedded(image);t.databases.push({id:Date.now(),img:e.img,label:e.label,embedded:n}),t.trainingModel(t.databases)},image.src=this.createDatabase.img}catch(t){}finally{this.databaseUploading=!1,this.createDatabase.img=null,this.createDatabase.label=""}},handleOnUploadTest:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.testUploading=!0,n.isPreviewUploaded=!0,n.testImg=t,e.next=6,n.findAd(t.split(",")[1]);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:return e.prev=11,n.testUploading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))()},findAd:function(image){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var body,n,r,o,l,i,d,c,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return body={image:image},e.next=3,t.$axios.$post("https://ad-detection-service-bxltsvmqda-as.a.run.app/ads/detection",body);case 3:return n=e.sent,console.log(n),e.next=7,t.$refs.image_canvas.getImageData(n.objects);case 7:for(i in r=e.sent,console.log("count detected",r.length),o=[],l=m({count:r.length,luminosity:"dark"}),r)d=r[i],c=t.getEmbedded(d),(f=t.querySimilarity(c))&&o.push(y(y({},n.objects[i]),{},{object:f.label,score:f.score,color:l[i]}));console.log("boxes",o),t.bboxes=o;case 14:case"end":return e.stop()}}),e)})))()},trainingModel:function(t){var e=t.map((function(t){return t.embedded})),n=t.map((function(t){return t.id}));this.knn={embedded:e,labels:n}},getEmbedded:function(img){var t=h.b.fromPixels(img).resizeNearestNeighbor([224,224]).toFloat().div(h.g(255)).expandDims();return this.embeddingModel.predict(t).arraySync()[0]},querySimilarity:function(t){var e=this.knn.embedded,n=this.knn.labels,r=-1,o=0;for(var i in e){var l=e[i],d=Object(_.cosineSimilarity)(l,t);d>o&&(r=n[i],o=d)}if(-1===r||o<.6)return null;var c=this.queryDatabase(r);return{id:r,label:null==c?void 0:c.label,score:o}},queryDatabase:function(t){return this.databases.find((function(e){return e.id===t}))},handleOnDeletePreview:function(){this.testImg=null,this.bboxes=[],this.isPreviewUploaded=!1},handleOnDeleteDatabase:function(){this.databases=[]},handleOnUploadDatabase:function(){var t=this;this.uploadDatabaseDialog=!0,this.$nextTick((function(){t.$refs.database_form.reset(),t.$refs.database_form.resetValidation()}))},chkLabelDuplicate:function(label){var t=this.databases.find((function(t){return t.label===label}));return console.log(label,"=>",t,this.databases),!t||"Label already exists."}}},O=(n(791),n(67)),j=n(80),V=n.n(j),I=n(295),S=n(717),A=n(602),M=n(837),U=n(839),R=n(840),$=n(198),z=n(170),P=n(199),F=n(133),B=n(95),T=n(847),L=n(201),E=n(719),N=n(462),W=n(846),H=n(808),J=n.n(H),K=n(213),component=Object(O.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],staticClass:"ad-detection-page fill-height"},[n("div",{staticClass:"ad-detection__container"},[n("v-card",[n("v-card-title",{staticClass:"py-2"},[n("div",[t._v("Artwork")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-menu",{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",o,!1),r),[n("v-icon",[t._v("mdi-dots-vertical")])],1)]}}])},[t._v(" "),n("v-list",[n("v-list-item",{attrs:{disabled:t.databases.length<1},on:{click:t.handleOnDeleteDatabase}},[n("v-list-item-title",[t._v("Delete Database")])],1)],1)],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-text",[t.databases.length>0?n("div",[t._v(t._s(t.databases.length)+" Image samples")]):n("div",[t._v("Add Image samples:")]),t._v(" "),n("div",{staticClass:"ad-detection-database"},[n("div",{staticClass:"ad-detection-upload-btn",on:{click:t.handleOnUploadDatabase}},[n("v-icon",{attrs:{size:"18"}},[t._v("mdi-tray-arrow-up")]),t._v(" "),n("div",{staticClass:"ad-detection-upload-btn__text"},[t._v("Upload")])],1),t._v(" "),n("div",{staticClass:"ad-detection-database-list"},[t._l(t.databases,(function(t){return[n("div",{key:t.id,staticClass:"ad-detection-database-item"},[n("v-img",{attrs:{src:t.img,width:"100%",contain:""}})],1)]}))],2)])])],1),t._v(" "),n("v-card",{staticClass:"mt-4",attrs:{id:"workspace"}},[n("v-card-title",[n("div",[t._v("Preview")]),t._v(" "),n("v-spacer"),t._v(" "),t.databases.length>0?n("v-menu",{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",o,!1),r),[n("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!1,3221905750)},[t._v(" "),n("v-list",[n("v-list-item",{attrs:{disabled:!t.testImg},on:{click:t.handleOnDeletePreview}},[n("v-list-item-title",[t._v("Delete Preview")])],1)],1)],1):t._e()],1),t._v(" "),n("v-divider"),t._v(" "),t.databases.length>0&&!t.isPreviewUploaded?n("v-card-text",[n("upload-image-field",{ref:"upload_test",staticStyle:{width:"100%"},attrs:{"add-text":"Click to upload",accept:"image/jpeg","hide-details":""},on:{change:t.handleOnUploadTest},model:{value:t.testImg,callback:function(e){t.testImg=e},expression:"testImg"}})],1):t.isPreviewUploaded?n("v-card-text",[n("div",{staticClass:"ad-detection-workspace"},[n("div",{staticClass:"ad-detection-workspace__canvas"},[n("bounding-box-canvas",{ref:"image_canvas",attrs:{src:t.testImg,bboxes:t.bboxes,width:t.canvasWidth,height:t.canvasHeight}})],1),t._v(" "),n("div",{staticClass:"ad-detection-workspace__output"},[n("div",{staticClass:"ad-detection-results",style:{maxHeight:t.canvasHeight+"px"}},[n("div",{staticClass:"ad-detection-results__title"},[t._v("Predictions")]),t._v(" "),n("div",{staticClass:"ad-detection-results__subtitle",staticStyle:{"margin-bottom":"8px"}},[t._v(t._s(t.bboxes.length)+" objects")]),t._v(" "),t._l(t.bboxes,(function(e,i){return[n("div",{key:"res-"+i,staticClass:"ad-detection-results__item"},[n("div",{staticClass:"ad-detection-results__label"},[t._v(t._s(e.object))]),t._v(" "),n("div",{staticClass:"ad-detection-results__percent"},[n("v-progress-linear",{attrs:{value:100*e.score,height:"18"}},[n("div",{staticStyle:{width:"100%"}},[n("div",{staticClass:"white--text text-right",style:{width:Math.ceil(100*e.score)+"%",paddingRight:"8px"}},[t._v(t._s(Math.ceil(100*e.score))+"%")])])])],1)])]}))],2)])])]):n("v-card-text",[t._v("\n        You must add artwork on top panel before you can preview it here\n      ")])],1)],1),t._v(" "),n("v-dialog",{attrs:{"max-width":"480",persistent:""},model:{value:t.uploadDatabaseDialog,callback:function(e){t.uploadDatabaseDialog=e},expression:"uploadDatabaseDialog"}},[n("v-card",[n("v-card-title",[t._v("Add new artwork")]),t._v(" "),n("v-card-text",[n("v-form",{ref:"database_form",on:{submit:function(t){t.preventDefault()}},model:{value:t.createDatabaseValid,callback:function(e){t.createDatabaseValid=e},expression:"createDatabaseValid"}},[n("v-text-field",{attrs:{label:"Label",rules:[function(t){return!!t||"Enter label name"},t.chkLabelDuplicate],dense:"",outlined:""},model:{value:t.createDatabase.label,callback:function(e){t.$set(t.createDatabase,"label",e)},expression:"createDatabase.label"}}),t._v(" "),n("upload-image-field",{ref:"upload_database",staticStyle:{width:"100%"},attrs:{rules:[function(t){return!!t||"Enter image"}],"add-text":"Click to upload",accept:"image/jpeg"},model:{value:t.createDatabase.img,callback:function(e){t.$set(t.createDatabase,"img",e)},expression:"createDatabase.img"}})],1)],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:""},on:{click:function(e){t.uploadDatabaseDialog=!1}}},[t._v("cancel")]),t._v(" "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:t.handleAddDatabase}},[t._v("add")])],1)],1)],1),t._v(" "),n("v-overlay",{model:{value:t.initializing,callback:function(e){t.initializing=e},expression:"initializing"}},[n("div",{staticClass:"ad-detection__overlay-box"},[t._v("Loading model...")])]),t._v(" "),n("v-overlay",{model:{value:t.databaseUploading,callback:function(e){t.databaseUploading=e},expression:"databaseUploading"}},[n("div",{staticClass:"ad-detection__overlay-box"},[t._v("Uploading database...")])]),t._v(" "),n("v-overlay",{model:{value:t.testUploading,callback:function(e){t.testUploading=e},expression:"testUploading"}},[n("div",{staticClass:"ad-detection__overlay-box"},[t._v("Finding offline advertise...")])])],1)}),[],!1,null,"909ad54e",null);e.default=component.exports;V()(component,{UploadImageField:n(727).default,BoundingBoxCanvas:n(728).default}),V()(component,{VBtn:I.a,VCard:S.a,VCardActions:A.a,VCardText:A.b,VCardTitle:A.c,VDialog:M.a,VDivider:U.a,VForm:R.a,VIcon:$.a,VImg:z.a,VList:P.a,VListItem:F.a,VListItemTitle:B.b,VMenu:T.a,VOverlay:L.a,VProgressLinear:E.a,VSpacer:N.a,VTextField:W.a}),J()(component,{Resize:K.a})}}]);