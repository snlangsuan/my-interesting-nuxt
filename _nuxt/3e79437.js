(window.webpackJsonp=window.webpackJsonp||[]).push([[14,7,8],{1e3:function(e,t,r){"use strict";r(887)},1001:function(e,t,r){var n=r(55)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Kanit:wght@100;300;400;500;600;700&display=swap);"]),n.push([e.i,".page-btn--up[data-v-495fc3fa]{transform:rotate(-180deg)}.page-btn--down[data-v-495fc3fa]{transform:rotate(0deg)}.page__container[data-v-495fc3fa]{height:100%;width:100%;margin:auto}.page-database[data-v-495fc3fa],.page-filter[data-v-495fc3fa],.page-workspace[data-v-495fc3fa]{padding-top:24px}.page-database__container[data-v-495fc3fa],.page-filter__container[data-v-495fc3fa],.page-workspace-item[data-v-495fc3fa]{width:100%;max-width:800px;margin:auto;padding-left:16px;padding-right:16px}.page-database--collapse[data-v-495fc3fa]{height:0!important;opacity:0!important;padding:0!important;border:none!important}.page-database--expand[data-v-495fc3fa]{border-top:thin solid rgba(0,0,0,.12);overflow:hidden;height:120px;padding:16px;transition:height .5s,padding .5s}.page-database__content[data-v-495fc3fa]{padding-top:8px;display:flex}.page-database-upload-btn[data-v-495fc3fa]{width:72px;height:58px;padding:4px 8px;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#e8f0fe;border-radius:4px;cursor:pointer;position:relative}.page-database-upload-btn--block[data-v-495fc3fa]{width:100%;height:32px;flex-direction:row}.page-database-upload-btn--block>.v-icon[data-v-495fc3fa]{margin-right:4px}.page-database-upload-btn>input[data-v-495fc3fa]{display:none}.page-database-upload-btn>.page-database-upload-btn__text[data-v-495fc3fa],.page-database-upload-btn>i[data-v-495fc3fa]{color:#1967d2}.page-database-upload-btn>.page-database-upload-btn__text[data-v-495fc3fa]{font-size:.8rem}.page-database-upload-btn[data-v-495fc3fa]:hover{background-color:#d2e3fc}.page-database-upload-btn[data-v-495fc3fa]:disabled{background-color:#eee;cursor:not-allowed}.page-database-upload-btn:disabled>.page-database-upload-btn__text[data-v-495fc3fa],.page-database-upload-btn:disabled>i[data-v-495fc3fa]{color:#888!important}.page-database-list[data-v-495fc3fa]{overflow:hidden;overflow-x:auto;margin-left:8px;display:flex}.page-database-item[data-v-495fc3fa]{width:58px;height:58px;position:relative}.page-database-item:hover .page-database-item__remove[data-v-495fc3fa]{display:flex;align-items:center;justify-content:center;cursor:pointer}.page-database-item__remove[data-v-495fc3fa]{display:none;position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.2)}.page-database-list>.page-database-item+.page-database-item[data-v-495fc3fa]{margin-left:4px}.page-filter--collapse[data-v-495fc3fa]{height:0!important;opacity:0!important;padding:0!important}.page-filter--expand[data-v-495fc3fa]{overflow:hidden;height:164px;padding:16px;transition:height .5s,padding .5s}.page-workspace-list[data-v-495fc3fa]{overflow:hidden;overflow-y:auto;padding-bottom:16px;padding-top:16px}.page-workspace-card__content[data-v-495fc3fa]{display:flex}.page-workspace-card__canvas[data-v-495fc3fa]{flex:0}.page-workspace-card__output[data-v-495fc3fa]{flex:1}.page-workspace-list>.page-workspace-item+.page-workspace-item[data-v-495fc3fa]{margin-top:16px}.page-workspace-boxes-results[data-v-495fc3fa]{overflow:hidden;overflow-y:auto}.page-workspace-boxes__title[data-v-495fc3fa]{font-size:1.1rem;font-weight:600}.page-workspace-boxes__item[data-v-495fc3fa]{display:flex;align-items:center;padding:8px 0}.page-workspace-boxes__color-box[data-v-495fc3fa]{width:22px;height:22px;min-height:100%;margin-right:8px;font-size:.65rem;display:flex;align-items:center;justify-content:center;color:#fff}.page-workspace-boxes__label[data-v-495fc3fa]{margin-right:8px;max-width:30%;width:30%;font-size:.8rem}.page-workspace-boxes__percent[data-v-495fc3fa]{flex:1}.page-workspace-boxes__score[data-v-495fc3fa]{padding-left:8px;font-size:.8rem}.page-footer[data-v-495fc3fa]{position:fixed;bottom:0;left:0;right:0;display:flex;align-items:center;justify-content:flex-end;padding-left:8px;padding-right:8px;padding-bottom:8px}.page-footer__text[data-v-495fc3fa]{font-size:.9rem;font-weight:400;color:#aaa}.page-temp-upload[data-v-495fc3fa]{position:absolute;top:0;left:0;z-index:-1}.page__overlay-box[data-v-495fc3fa]{min-width:320px;text-align:center;background-color:#fff;padding:32px 16px;color:#212121;border-radius:4px;white-space:pre-wrap;word-wrap:break-word}@media screen and (max-width:320px){.page-database--expand[data-v-495fc3fa]{height:161px}}",""]),e.exports=n},1006:function(e,t,r){var content=r(1007);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(56).default)("197fcea4",content,!0,{sourceMap:!1})},1007:function(e,t,r){var n=r(55)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Kanit:wght@100;300;400;500;600;700&display=swap);"]),n.push([e.i,'.v-chip:not(.v-chip--outlined).accent,.v-chip:not(.v-chip--outlined).error,.v-chip:not(.v-chip--outlined).info,.v-chip:not(.v-chip--outlined).primary,.v-chip:not(.v-chip--outlined).secondary,.v-chip:not(.v-chip--outlined).success,.v-chip:not(.v-chip--outlined).warning{color:#fff}.theme--light.v-chip{border-color:rgba(0,0,0,.12);color:rgba(0,0,0,.87)}.theme--light.v-chip:not(.v-chip--active){background:#e0e0e0}.theme--light.v-chip:hover:before{opacity:.04}.theme--light.v-chip--active:before,.theme--light.v-chip--active:hover:before,.theme--light.v-chip:focus:before{opacity:.12}.theme--light.v-chip--active:focus:before{opacity:.16}.theme--dark.v-chip{border-color:hsla(0,0%,100%,.12);color:#fff}.theme--dark.v-chip:not(.v-chip--active){background:#555}.theme--dark.v-chip:hover:before{opacity:.08}.theme--dark.v-chip--active:before,.theme--dark.v-chip--active:hover:before,.theme--dark.v-chip:focus:before{opacity:.24}.theme--dark.v-chip--active:focus:before{opacity:.32}.v-chip{align-items:center;cursor:default;display:inline-flex;line-height:20px;max-width:100%;outline:none;overflow:hidden;padding:0 12px;position:relative;text-decoration:none;transition-duration:.28s;transition-property:box-shadow,opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);vertical-align:middle;white-space:nowrap}.v-chip:before{background-color:currentColor;bottom:0;border-radius:inherit;content:"";left:0;opacity:0;position:absolute;pointer-events:none;right:0;top:0}.v-chip .v-avatar{height:24px!important;min-width:24px!important;width:24px!important}.v-chip .v-icon{font-size:24px}.v-application--is-ltr .v-chip .v-avatar--left,.v-application--is-ltr .v-chip .v-icon--left{margin-left:-6px;margin-right:6px}.v-application--is-ltr .v-chip .v-avatar--right,.v-application--is-ltr .v-chip .v-icon--right,.v-application--is-rtl .v-chip .v-avatar--left,.v-application--is-rtl .v-chip .v-icon--left{margin-left:6px;margin-right:-6px}.v-application--is-rtl .v-chip .v-avatar--right,.v-application--is-rtl .v-chip .v-icon--right{margin-left:-6px;margin-right:6px}.v-chip:not(.v-chip--no-color) .v-icon{color:inherit}.v-chip .v-chip__close.v-icon{font-size:18px;max-height:18px;max-width:18px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-application--is-ltr .v-chip .v-chip__close.v-icon.v-icon--right{margin-right:-4px}.v-application--is-rtl .v-chip .v-chip__close.v-icon.v-icon--right{margin-left:-4px}.v-chip .v-chip__close.v-icon:active,.v-chip .v-chip__close.v-icon:focus,.v-chip .v-chip__close.v-icon:hover{opacity:.72}.v-chip .v-chip__content{align-items:center;display:inline-flex;height:100%;max-width:100%}.v-chip--active .v-icon{color:inherit}.v-chip--link:before{transition:opacity .3s cubic-bezier(.25,.8,.5,1)}.v-chip--link:focus:before{opacity:.32}.v-chip--clickable{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-chip--clickable:active{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.v-chip--disabled{opacity:.4;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-chip__filter{max-width:24px}.v-chip__filter.v-icon{color:inherit}.v-chip__filter.expand-x-transition-enter,.v-chip__filter.expand-x-transition-leave-active{margin:0}.v-chip--pill .v-chip__filter{margin-right:0 16px 0 0}.v-chip--pill .v-avatar{height:32px!important;width:32px!important}.v-application--is-ltr .v-chip--pill .v-avatar--left{margin-left:-12px}.v-application--is-ltr .v-chip--pill .v-avatar--right,.v-application--is-rtl .v-chip--pill .v-avatar--left{margin-right:-12px}.v-application--is-rtl .v-chip--pill .v-avatar--right{margin-left:-12px}.v-chip--label{border-radius:4px!important}.v-chip.v-chip--outlined{border-width:thin;border-style:solid}.v-chip.v-chip--outlined.v-chip--active:before{opacity:.08}.v-chip.v-chip--outlined .v-icon{color:inherit}.v-chip.v-chip--outlined.v-chip.v-chip{background-color:transparent!important}.v-chip.v-chip--selected{background:transparent}.v-chip.v-chip--selected:after{opacity:.28}.v-chip.v-size--x-small{border-radius:8px;font-size:10px;height:16px}.v-chip.v-size--small{border-radius:12px;font-size:12px;height:24px}.v-chip.v-size--default{border-radius:16px;font-size:14px;height:32px}.v-chip.v-size--large{border-radius:27px;font-size:16px;height:54px}.v-chip.v-size--x-large{border-radius:33px;font-size:18px;height:66px}',""]),e.exports=n},1008:function(e,t,r){var content=r(1009);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(56).default)("3c0eddd7",content,!0,{sourceMap:!1})},1009:function(e,t,r){var n=r(55)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Kanit:wght@100;300;400;500;600;700&display=swap);"]),n.push([e.i,".v-chip-group .v-chip{margin:4px 8px 4px 0}.v-chip-group .v-chip--active{color:inherit}.v-chip-group .v-chip--active.v-chip--no-color:after{opacity:.22}.v-chip-group .v-chip--active.v-chip--no-color:focus:after{opacity:.32}.v-chip-group .v-slide-group__content{padding:4px 0}.v-chip-group--column .v-slide-group__content{white-space:normal;flex-wrap:wrap;max-width:100%}",""]),e.exports=n},1011:function(e,t,r){var content=r(1012);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(56).default)("8f7a87bc",content,!0,{sourceMap:!1})},1012:function(e,t,r){var n=r(55)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Kanit:wght@100;300;400;500;600;700&display=swap);"]),n.push([e.i,".v-slide-group{display:flex}.v-slide-group:not(.v-slide-group--has-affixes)>.v-slide-group__next,.v-slide-group:not(.v-slide-group--has-affixes)>.v-slide-group__prev{display:none}.v-slide-group.v-item-group>.v-slide-group__next,.v-slide-group.v-item-group>.v-slide-group__prev{cursor:pointer}.v-slide-item{display:inline-flex;flex:0 1 auto}.v-slide-group__next,.v-slide-group__prev{align-items:center;display:flex;flex:0 1 52px;justify-content:center;min-width:52px}.v-slide-group__content{display:flex;flex:1 0 auto;position:relative;transition:.3s cubic-bezier(.25,.8,.5,1);white-space:nowrap}.v-slide-group__wrapper{contain:content;display:flex;flex:1 1 auto;overflow:hidden}.v-slide-group__next--disabled,.v-slide-group__prev--disabled{pointer-events:none}",""]),e.exports=n},1013:function(e,t,r){"use strict";r(37),r(38),r(45),r(46);var n=r(15),o=(r(25),r(65),r(40),r(57),r(139),r(549),r(95),r(550),r(551),r(552),r(553),r(554),r(555),r(556),r(557),r(558),r(559),r(560),r(561),r(562),r(97),r(119),r(39),r(152),r(401),r(12)),l=r(155),c=r(13);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h=["sm","md","lg","xl"],v=h.reduce((function(e,t){return e[t]={type:[Boolean,String,Number],default:!1},e}),{}),m=h.reduce((function(e,t){return e["offset"+Object(c.x)(t)]={type:[String,Number],default:null},e}),{}),x=h.reduce((function(e,t){return e["order"+Object(c.x)(t)]={type:[String,Number],default:null},e}),{}),_={col:Object.keys(v),offset:Object.keys(m),order:Object.keys(x)};function y(e,t,r){var n=e;if(null!=r&&!1!==r){if(t){var o=t.replace(e,"");n+="-".concat(o)}return"col"!==e||""!==r&&!0!==r?(n+="-".concat(r)).toLowerCase():n.toLowerCase()}}var w=new Map;t.a=o.default.extend({name:"v-col",functional:!0,props:f(f(f(f({cols:{type:[Boolean,String,Number],default:!1}},v),{},{offset:{type:[String,Number],default:null}},m),{},{order:{type:[String,Number],default:null}},x),{},{alignSelf:{type:String,default:null,validator:function(e){return["auto","start","end","center","baseline","stretch"].includes(e)}},tag:{type:String,default:"div"}}),render:function(e,t){var r=t.props,data=t.data,o=t.children,c=(t.parent,"");for(var d in r)c+=String(r[d]);var f=w.get(c);return f||function(){var e,t;for(t in f=[],_)_[t].forEach((function(e){var n=r[e],o=y(t,e,n);o&&f.push(o)}));var o=f.some((function(e){return e.startsWith("col-")}));f.push((e={col:!o||!r.cols},Object(n.a)(e,"col-".concat(r.cols),r.cols),Object(n.a)(e,"offset-".concat(r.offset),r.offset),Object(n.a)(e,"order-".concat(r.order),r.order),Object(n.a)(e,"align-self-".concat(r.alignSelf),r.alignSelf),e)),w.set(c,f)}(),e(r.tag,Object(l.a)(data,{class:f}),o)}})},1064:function(e,t,r){"use strict";r.r(t);r(40),r(37),r(45),r(39),r(46),r(94),r(129),r(130),r(137);var n=r(15),o=r(63),l=(r(135),r(150),r(405),r(356),r(65),r(25),r(97),r(95),r(906),r(568),r(38),r(119),r(136),r(70),r(69),r(57),r(159),r(275),r(188),r(825)),c=r.n(l),d=r(783);function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var x={name:"AdDetectionPage",layout:"ml",data:function(){return{title:"Offline-advertising Detection",loading:{show:!0,message:"Getting model version..."},initializing:!0,hideDatabase:!1,hasChangVersion:!1,hasProblem:!1,hideOptions:!1,sampleUploaded:!1,uploadDatabaseDialog:!1,createDatabaseValid:!0,createDatabase:{label:"",img:[]},screenWidth:0,canvasWidth:0,canvasHeight:0,contentHeight:0,modelVersion:"0.0",embeddingModel:null,minimumSimilarityThreshold:.4,minimumLocalizationThreshold:.7,viewLabels:[],databases:[],samples:[],uploads:[],tempImage:null,resizeObserver:null,reportItems:[],htmlToPdfOptions:{margin:0,image:{type:"jpeg",quality:1},enableLinks:!1,html2canvas:{dpi:192,scale:4,letterRendering:!0,useCORS:!0},jsPDF:{unit:"in",format:"a4",orientation:"portrait"}}}},mounted:function(){this.initialize(),this.resizeObserver||(this.resizeObserver=new ResizeObserver(this.onResize));var e=document.querySelector(".page-database");e&&this.resizeObserver.observe(e);var t=document.querySelector(".page-filter");t&&this.resizeObserver.observe(t)},beforeDestroy:function(){var e=document.querySelector(".page-database");e&&this.resizeObserver&&this.resizeObserver.unobserve(e);var t=document.querySelector(".page-filter");t&&this.resizeObserver&&this.resizeObserver.unobserve(t)},methods:{initialize:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.initializing=!0,e.loading.message="Getting model version...",e.loading.show=!0,t.next=6,e.getModelVersion();case 6:if(e.loading.message="Loading model...",!localStorage.getItem("detection-offline-ad")){t.next=15;break}return t.next=11,e.$tfjs.loadLayersModel("indexeddb://detection-offline-ad");case 11:r=t.sent,e.embeddingModel=r,t.next=22;break;case 15:return t.next=17,e.$tfjs.loadLayersModel("https://storage.googleapis.com/demo-ml-model/detection-offline-ad/model.json");case 17:return n=t.sent,e.embeddingModel=n,t.next=21,n.save("indexeddb://detection-offline-ad");case 21:localStorage.setItem("detection-offline-ad",!0);case 22:e.loading.message="Loading database...",e.loadDatabaseLocalStorage(),e.hasChangVersion&&(e.loading.message="Re-generate database...",e.reversionDatabase()),t.next=30;break;case 27:t.prev=27,t.t0=t.catch(0),console.error(t.t0);case 30:return t.prev=30,e.initializing=!1,e.loading.show=!1,t.finish(30);case 34:case"end":return t.stop()}}),t,null,[[0,27,30,34]])})))()},setResizeObserver:function(){var e=this;setTimeout((function(){e.resizeObserver||(e.resizeObserver=new ResizeObserver(e.onResize));var t=document.querySelector(".page-database");t&&e.resizeObserver.observe(t);var r=document.querySelector(".page-filter");r&&e.resizeObserver.observe(r)}),200)},onResize:function(){console.log("change size");var e=document.querySelector(".page-database__container"),t=document.querySelector(".page-workspace");if(this.screenWidth=window.innerWidth,e&&t){var r=e.offsetWidth-32,n=this.screenWidth>560?.6:1;this.canvasWidth=Math.round(r*n)-32,this.canvasHeight=this.canvasWidth;var o=window.innerHeight,l=t.offsetTop;this.contentHeight=o-l,console.log("height",o,this.contentHeight,l,"width",this.canvasWidth)}},handleOnAddDatabase:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,image,n,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$refs.database_form.validate()){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,r=JSON.parse(JSON.stringify(e.createDatabase)),e.uploadDatabaseDialog=!1,e.loading.message="Adding Image to database...",e.loading.show=!0,t.next=9,e.base64ToImage(e.createDatabase.img[0]);case 9:image=t.sent,n=e.getEmbedded(image),o=Date.now(),l=c()(o).toHex(),e.databases.push({id:o,img:r.img[0],label:r.label,embedded:n,color:l}),e.trainingModel(e.databases),e.updateDatabaseLocalStorage(e.databases),e.viewLabels=e.databases.map((function(e){return e.id})),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(2),console.error("add database error",t.t0);case 22:return t.prev=22,e.loading.show=!1,t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[2,19,22,25]])})))()},handleOnUploadDatabase:function(){var e=this;this.createDatabase={label:"",img:[]},this.uploadDatabaseDialog=!0,this.$nextTick((function(){e.$refs.database_form.reset(),e.$refs.database_form.resetValidation()}))},handleOnResetReferences:function(){try{this.databases=[],localStorage.removeItem("offline-ad-databases")}catch(e){console.error("remove database",e)}},handleOnRemoveReference:function(e){if(e)try{var t=this.databases.findIndex((function(t){return t.id===e}));t>-1&&(this.databases.splice(t,1),this.trainingModel(this.databases),this.updateDatabaseLocalStorage(this.databases))}catch(e){console.error("remove database error",e)}},handleOnReloadPage:function(){window.location.reload()},handleOnResetSample:function(){this.uploads=[],this.samples=[],this.sampleUploaded=!1},handleOnExport:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,i,n,img;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.loading.message="Preparing data...",e.loading.show=!0,r=[],t.t0=regeneratorRuntime.keys(e.samples);case 4:if((t.t1=t.t0()).done){t.next=13;break}return i=t.t1.value,n=e.samples[i],t.next=9,e.$refs["image_canvas_"+n.id][0].getDataURL();case 9:img=t.sent,r.push({no:Number(i)+1,id:n.id,img:img,boxes:e.filterBoxes(n.boxes)}),t.next=4;break;case 13:e.reportItems=r,setTimeout((function(){e.$refs.export_pdf.generatePdf()}),300);case 15:case"end":return t.stop()}}),t)})))()},handleOnPdfGenerate:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,l,c,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.html2pdf,o=e.options,l=e.pdfContent,r.next=3,n().set(o).from(l).outputPdf("blob","my-invoice.pdf");case 3:c=r.sent,d=URL.createObjectURL(c),window.open(d),t.loading.show=!1;case 7:case"end":return r.stop()}}),r)})))()},filterBoxes:function(e){var t=this;return e.filter((function(e){return e.score>=t.minimumSimilarityThreshold&&e.detection_confidence>=t.minimumLocalizationThreshold&&t.viewLabels.includes(e.object_id)}))},handleOnSampleUpload:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,i,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,e.loading.message="Finding Offline advertise...",e.loading.show=!0,r=e.$refs.sample_upload.getRaws(),n=[],t.t0=regeneratorRuntime.keys(e.uploads);case 6:if((t.t1=t.t0()).done){t.next=16;break}return i=t.t1.value,e.loading.message="".concat(Number(i)+1,"/").concat(e.uploads.length,"\nFinding Offline advertise..."),o=e.uploads[i],t.next=12,e.getOfflineAdsApi(o);case 12:l=t.sent,n.push({id:Date.now()+i,name:r[i].name,image:o,boxes:l}),t.next=6;break;case 16:e.uploads=[],e.samples=n,e.sampleUploaded=!0,e.setResizeObserver(),e.onResize(),t.next=26;break;case 23:t.prev=23,t.t2=t.catch(0),console.error(t.t2);case 26:return t.prev=26,e.loading.show=!1,t.finish(26);case 29:case"end":return t.stop()}}),t,null,[[0,23,26,29]])})))()},getOfflineAdsApi:function(image){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var body,r,n,o,l,i,c,d,f,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return body={image:image.split(",")[1],threshold:0},t.next=3,e.$axios.$post("https://ad-detection-service-bxltsvmqda-as.a.run.app/ads/detection",body);case 3:return r=t.sent,n=r.objects,e.tempImage=image,t.next=8,new Promise((function(e){return setTimeout(e,1e3)}));case 8:return t.next=10,e.$refs.temp_canvas.getImageDataBoxes(n);case 10:for(i in o=t.sent,l=[],o)c=o[i],d=n[i],f=e.getEmbedded(c),(h=e.querySimilarity(f))&&l.push(m(m({},r.objects[i]),{},{object:h.label,object_id:h.id,score:h.score,color:h.color,detection_confidence:d.confidence,id:Date.now()+i,$index:Number(i)}));return t.abrupt("return",l);case 14:case"end":return t.stop()}}),t)})))()},loadDatabaseLocalStorage:function(){try{var e=localStorage.getItem("offline-ad-databases");e&&(this.databases=JSON.parse(e),this.viewLabels=this.databases.map((function(e){return e.id})),this.trainingModel(this.databases))}catch(e){console.error("load database error",e)}},reversionDatabase:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,image;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=f(e.databases),t.prev=1,r.s();case 3:if((n=r.n()).done){t.next=11;break}return o=n.value,t.next=7,e.base64ToImage(o.img);case 7:image=t.sent,o.embedded=e.getEmbedded(image);case 9:t.next=3;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),r.e(t.t0);case 16:return t.prev=16,r.f(),t.finish(16);case 19:e.trainingModel(e.databases),e.updateDatabaseLocalStorage(e.databases);case 21:case"end":return t.stop()}}),t,null,[[1,13,16,19]])})))()},base64ToImage:function(e){return new Promise((function(t,r){var image=new Image;image.onload=function(){t(image)},image.src=e}))},getEmbedded:function(img){var e=this.$tfjs.browser.fromPixels(img).resizeNearestNeighbor([224,224]).toFloat().div(this.$tfjs.scalar(255)).expandDims();return this.embeddingModel.predict(e).arraySync()[0]},trainingModel:function(e){var t=e.map((function(e){return e.embedded})),r=e.map((function(e){return e.id}));this.knn={embedded:t,labels:r}},getModelVersion:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("https://storage.googleapis.com/demo-ml-model/detection-offline-ad/version.json");case 3:r=t.sent,n=localStorage.getItem("detection-offline-ad-version"),e.hasChangVersion=!1,n!==r.version&&(localStorage.removeItem("detection-offline-ad"),window.indexedDB.deleteDatabase("detection-offline-ad"),localStorage.setItem("detection-offline-ad-version",r.version),e.hasChangVersion=!0),e.modelVersion=r.version,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e.hasProblem=!0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},chkLabelDuplicate:function(label){return!this.databases.find((function(e){return e.label===label}))||"Label already exists."},queryDatabase:function(e){return this.databases.find((function(t){return t.id===e}))},updateDatabaseLocalStorage:function(e){try{localStorage.setItem("offline-ad-databases",JSON.stringify(e))}catch(e){console.error("update database error",e)}},querySimilarity:function(e){var t=this.knn.embedded,r=this.knn.labels,n=-1,o=0;for(var i in t){var l=t[i],c=Object(d.cosineSimilarity)(l,e);c>o&&(n=r[i],o=c)}if(-1===n||o<0)return null;var f=this.queryDatabase(n);return{id:n,label:null==f?void 0:f.label,score:o,color:null==f?void 0:f.color}}}},_=(r(1e3),r(138)),y=r(160),w=r.n(y),O=r(547),k=r(888),C=r(747),j=r(51),S=(r(1006),r(43)),D=r(399),$=r(247),z=r(80),P=r(302),I=r(88),R=r(141),V=r(195),M=r(301),A=r(41);function L(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function T(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?L(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):L(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var E=Object(S.a)(z.a,M.a,V.a,I.a,Object(P.a)("chipGroup"),Object(R.b)("inputValue")).extend({name:"v-chip",props:{active:{type:Boolean,default:!0},activeClass:{type:String,default:function(){return this.chipGroup?this.chipGroup.activeClass:""}},close:Boolean,closeIcon:{type:String,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},disabled:Boolean,draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:Boolean,outlined:Boolean,pill:Boolean,tag:{type:String,default:"span"},textColor:String,value:null},data:function(){return{proxyClass:"v-chip--active"}},computed:{classes:function(){return T(T(T(T({"v-chip":!0},V.a.options.computed.classes.call(this)),{},{"v-chip--clickable":this.isClickable,"v-chip--disabled":this.disabled,"v-chip--draggable":this.draggable,"v-chip--label":this.label,"v-chip--link":this.isLink,"v-chip--no-color":!this.color,"v-chip--outlined":this.outlined,"v-chip--pill":this.pill,"v-chip--removable":this.hasClose},this.themeClasses),this.sizeableClasses),this.groupClasses)},hasClose:function(){return Boolean(this.close)},isClickable:function(){return Boolean(V.a.options.computed.isClickable.call(this)||this.chipGroup)}},created:function(){var e=this;[["outline","outlined"],["selected","input-value"],["value","active"],["@input","@active.sync"]].forEach((function(t){var r=Object(j.a)(t,2),n=r[0],o=r[1];e.$attrs.hasOwnProperty(n)&&Object(A.a)(n,o,e)}))},methods:{click:function(e){this.$emit("click",e),this.chipGroup&&this.toggle()},genFilter:function(){var e=[];return this.isActive&&e.push(this.$createElement($.a,{staticClass:"v-chip__filter",props:{left:!0}},this.filterIcon)),this.$createElement(D.b,e)},genClose:function(){var e=this;return this.$createElement($.a,{staticClass:"v-chip__close",props:{right:!0,size:18},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.$emit("click:close"),e.$emit("update:active",!1)}}},this.closeIcon)},genContent:function(){return this.$createElement("span",{staticClass:"v-chip__content"},[this.filter&&this.genFilter(),this.$slots.default,this.hasClose&&this.genClose()])}},render:function(e){var t=[this.genContent()],r=this.generateRouteLink(),n=r.tag,data=r.data;data.attrs=T(T({},data.attrs),{},{draggable:this.draggable?"true":void 0,tabindex:this.chipGroup&&!this.disabled?0:data.attrs.tabindex}),data.directives.push({name:"show",value:this.active}),data=this.setBackgroundColor(this.color,data);var o=this.textColor||this.outlined&&this.color;return e(n,this.setTextColor(o,data),t)}}),B=(r(1008),r(1010),r(1011),r(352)),W=r(385),N=r(400),U=r(464),F=r(13);function H(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw o}}}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function K(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function X(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?K(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):K(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function J(e){var t=Math.abs(e);return Math.sign(e)*(t/((1/.501-2)*(1-t)+1))}function Y(e,t,r,n){var o=e.clientWidth,l=r?t.content-e.offsetLeft-o:e.offsetLeft;r&&(n=-n);var c=t.wrapper+n,d=o+l,f=.4*o;return l<=n?n=Math.max(l-f,0):c<=d&&(n=Math.min(n-(c-d-f),t.content-t.wrapper)),r?-n:n}var Q=Object(S.a)(B.a,W.a).extend({name:"base-slide-group",directives:{Resize:N.a,Touch:U.a},props:{activeClass:{type:String,default:"v-slide-item--active"},centerActive:Boolean,nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},showArrows:{type:[Boolean,String],validator:function(e){return"boolean"==typeof e||["always","desktop","mobile"].includes(e)}}},data:function(){return{internalItemsLength:0,isOverflowing:!1,resizeTimeout:0,startX:0,isSwipingHorizontal:!1,isSwiping:!1,scrollOffset:0,widths:{content:0,wrapper:0}}},computed:{canTouch:function(){return"undefined"!=typeof window},__cachedNext:function(){return this.genTransition("next")},__cachedPrev:function(){return this.genTransition("prev")},classes:function(){return X(X({},B.a.options.computed.classes.call(this)),{},{"v-slide-group":!0,"v-slide-group--has-affixes":this.hasAffixes,"v-slide-group--is-overflowing":this.isOverflowing})},hasAffixes:function(){switch(this.showArrows){case"always":return!0;case"desktop":return!this.isMobile;case!0:return this.isOverflowing||Math.abs(this.scrollOffset)>0;case"mobile":return this.isMobile||this.isOverflowing||Math.abs(this.scrollOffset)>0;default:return!this.isMobile&&(this.isOverflowing||Math.abs(this.scrollOffset)>0)}},hasNext:function(){if(!this.hasAffixes)return!1;var e=this.widths,content=e.content,t=e.wrapper;return content>Math.abs(this.scrollOffset)+t},hasPrev:function(){return this.hasAffixes&&0!==this.scrollOffset}},watch:{internalValue:"setWidths",isOverflowing:"setWidths",scrollOffset:function(e){this.$vuetify.rtl&&(e=-e);var t=e<=0?J(-e):e>this.widths.content-this.widths.wrapper?-(this.widths.content-this.widths.wrapper)+J(this.widths.content-this.widths.wrapper-e):-e;this.$vuetify.rtl&&(t=-t),this.$refs.content.style.transform="translateX(".concat(t,"px)")}},beforeUpdate:function(){this.internalItemsLength=(this.$children||[]).length},updated:function(){this.internalItemsLength!==(this.$children||[]).length&&this.setWidths()},methods:{onScroll:function(){this.$refs.wrapper.scrollLeft=0},onFocusin:function(e){if(this.isOverflowing){var t,r=H(Object(F.f)(e));try{for(r.s();!(t=r.n()).done;){var n,o=t.value,l=H(this.items);try{for(l.s();!(n=l.n()).done;){var c=n.value;if(c.$el===o)return void(this.scrollOffset=Y(c.$el,this.widths,this.$vuetify.rtl,this.scrollOffset))}}catch(e){l.e(e)}finally{l.f()}}}catch(e){r.e(e)}finally{r.f()}}},genNext:function(){var e=this,slot=this.$scopedSlots.next?this.$scopedSlots.next({}):this.$slots.next||this.__cachedNext;return this.$createElement("div",{staticClass:"v-slide-group__next",class:{"v-slide-group__next--disabled":!this.hasNext},on:{click:function(){return e.onAffixClick("next")}},key:"next"},[slot])},genContent:function(){return this.$createElement("div",{staticClass:"v-slide-group__content",ref:"content",on:{focusin:this.onFocusin}},this.$slots.default)},genData:function(){return{class:this.classes,directives:[{name:"resize",value:this.onResize}]}},genIcon:function(e){var t=e;this.$vuetify.rtl&&"prev"===e?t="next":this.$vuetify.rtl&&"next"===e&&(t="prev");var r="".concat(e[0].toUpperCase()).concat(e.slice(1)),n=this["has".concat(r)];return this.showArrows||n?this.$createElement($.a,{props:{disabled:!n}},this["".concat(t,"Icon")]):null},genPrev:function(){var e=this,slot=this.$scopedSlots.prev?this.$scopedSlots.prev({}):this.$slots.prev||this.__cachedPrev;return this.$createElement("div",{staticClass:"v-slide-group__prev",class:{"v-slide-group__prev--disabled":!this.hasPrev},on:{click:function(){return e.onAffixClick("prev")}},key:"prev"},[slot])},genTransition:function(e){return this.$createElement(D.c,[this.genIcon(e)])},genWrapper:function(){var e=this;return this.$createElement("div",{staticClass:"v-slide-group__wrapper",directives:[{name:"touch",value:{start:function(t){return e.overflowCheck(t,e.onTouchStart)},move:function(t){return e.overflowCheck(t,e.onTouchMove)},end:function(t){return e.overflowCheck(t,e.onTouchEnd)}}}],ref:"wrapper",on:{scroll:this.onScroll}},[this.genContent()])},calculateNewOffset:function(e,t,r,n){var o=r?-1:1,l=o*n+("prev"===e?-1:1)*t.wrapper;return o*Math.max(Math.min(l,t.content-t.wrapper),0)},onAffixClick:function(e){this.$emit("click:".concat(e)),this.scrollTo(e)},onResize:function(){this._isDestroyed||this.setWidths()},onTouchStart:function(e){var content=this.$refs.content;this.startX=this.scrollOffset+e.touchstartX,content.style.setProperty("transition","none"),content.style.setProperty("willChange","transform")},onTouchMove:function(e){if(this.canTouch){if(!this.isSwiping){var t=e.touchmoveX-e.touchstartX,r=e.touchmoveY-e.touchstartY;this.isSwipingHorizontal=Math.abs(t)>Math.abs(r),this.isSwiping=!0}this.isSwipingHorizontal&&(this.scrollOffset=this.startX-e.touchmoveX,document.documentElement.style.overflowY="hidden")}},onTouchEnd:function(){if(this.canTouch){var e=this.$refs,content=e.content,t=e.wrapper,r=content.clientWidth-t.clientWidth;content.style.setProperty("transition",null),content.style.setProperty("willChange",null),this.$vuetify.rtl?this.scrollOffset>0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset<=-r&&(this.scrollOffset=-r):this.scrollOffset<0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset>=r&&(this.scrollOffset=r),this.isSwiping=!1,document.documentElement.style.removeProperty("overflow-y")}},overflowCheck:function(e,t){e.stopPropagation(),this.isOverflowing&&t(e)},scrollIntoView:function(){if(!this.selectedItem&&this.items.length){var e=this.items[this.items.length-1].$el.getBoundingClientRect(),t=this.$refs.wrapper.getBoundingClientRect();(this.$vuetify.rtl&&t.right<e.right||!this.$vuetify.rtl&&t.left>e.left)&&this.scrollTo("prev")}this.selectedItem&&(0===this.selectedIndex||!this.centerActive&&!this.isOverflowing?this.scrollOffset=0:this.centerActive?this.scrollOffset=function(e,t,r){var n=e.offsetLeft,o=e.clientWidth;if(r){var l=t.content-n-o/2-t.wrapper/2;return-Math.min(t.content-t.wrapper,Math.max(0,l))}var c=n+o/2-t.wrapper/2;return Math.min(t.content-t.wrapper,Math.max(0,c))}(this.selectedItem.$el,this.widths,this.$vuetify.rtl):this.isOverflowing&&(this.scrollOffset=Y(this.selectedItem.$el,this.widths,this.$vuetify.rtl,this.scrollOffset)))},scrollTo:function(e){this.scrollOffset=this.calculateNewOffset(e,{content:this.$refs.content?this.$refs.content.clientWidth:0,wrapper:this.$refs.wrapper?this.$refs.wrapper.clientWidth:0},this.$vuetify.rtl,this.scrollOffset)},setWidths:function(){var e=this;window.requestAnimationFrame((function(){if(!e._isDestroyed){var t=e.$refs,content=t.content,r=t.wrapper;e.widths={content:content?content.clientWidth:0,wrapper:r?r.clientWidth:0},e.isOverflowing=e.widths.wrapper+1<e.widths.content,e.scrollIntoView()}}))}},render:function(e){return e("div",this.genData(),[this.genPrev(),this.genWrapper(),this.genNext()])}});Q.extend({name:"v-slide-group",provide:function(){return{slideGroup:this}}});function Z(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function ee(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Z(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):Z(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var te=Object(S.a)(Q,z.a).extend({name:"v-chip-group",provide:function(){return{chipGroup:this}},props:{column:Boolean},computed:{classes:function(){return ee(ee({},Q.options.computed.classes.call(this)),{},{"v-chip-group":!0,"v-chip-group--column":this.column})}},watch:{column:function(e){e&&(this.scrollOffset=0),this.$nextTick(this.onResize)}},methods:{genData:function(){return this.setTextColor(this.color,ee({},Q.options.methods.genData.call(this)))}}}),ae=r(1013),ie=r(1059),re=r(1016),ne=r(1017),oe=r(381),se=r(351),le=r(382),ce=r(266),de=r(190),pe=r(1061),ue=r(386),fe=r(889),he=r(727),ve=r(1062),ge=r(733),me=r(1070),be=r(1063),component=Object(_.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page__container"},[r("div",{staticClass:"page-database"},[r("div",{staticClass:"page-database__container"},[r("v-card",[r("v-card-title",{staticClass:"py-2"},[r("v-btn",{class:["mr-2",e.hideDatabase?"page-btn--up":"page-btn--down"],attrs:{icon:"",small:""},on:{click:function(t){e.hideDatabase=!e.hideDatabase}}},[r("v-icon",[e._v("mdi-chevron-down")])],1),e._v(" "),r("div",[e._v("References")]),e._v(" "),r("v-spacer"),e._v(" "),e.databases.length>0&&e.samples.length<1?r("v-menu",{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[r("v-btn",e._g(e._b({attrs:{small:"",icon:""}},"v-btn",o,!1),n),[r("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!1,3448670655)},[e._v(" "),r("v-list",[r("v-list-item",{on:{click:e.handleOnResetReferences}},[r("v-list-item-title",[e._v("\n                  Reset References\n                ")])],1)],1)],1):e._e()],1),e._v(" "),r("v-card-text",{staticClass:"pa-0"},[r("div",{class:["page-database--expand",{"page-database--collapse":e.hideDatabase}]},[e.databases.length>0?r("div",[e._v("\n              "+e._s(e.databases.length)+" References "),e.samples.length>0?r("span",[e._v("(Disabled add/remove)")]):e._e()]):r("div",[e._v("Add Reference:")]),e._v(" "),r("div",{staticClass:"page-database__content"},[e.samples.length<1?r("button",{staticClass:"page-database-upload-btn",on:{click:e.handleOnUploadDatabase}},[r("v-icon",{attrs:{size:"18"}},[e._v("mdi-tray-arrow-up")]),e._v(" "),r("div",{staticClass:"page-database-upload-btn__text"},[e._v("Upload")])],1):e._e(),e._v(" "),r("div",{staticClass:"page-database-list"},[e._l(e.databases,(function(t){return[r("div",{key:t.id,staticClass:"page-database-item"},[r("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var o=n.on,l=n.attrs;return[r("div",e._g(e._b({},"div",l,!1),o),[r("v-img",{attrs:{src:t.img,width:"100%",contain:""}}),e._v(" "),e.samples.length<1?r("div",{staticClass:"page-database-item__remove"},[r("v-btn",{attrs:{icon:"",small:""},on:{click:function(r){return e.handleOnRemoveReference(t.id)}}},[r("v-icon",{attrs:{color:"white"}},[e._v("\n                                mdi-close-circle\n                              ")])],1)],1):e._e()],1)]}}],null,!0)},[e._v(" "),r("span",[e._v(e._s(t.label))])])],1)]}))],2)])])])],1)],1)]),e._v(" "),e.sampleUploaded?r("div",{staticClass:"page-filter pt-2"},[r("div",{staticClass:"page-filter__container"},[r("v-card",{attrs:{color:"transparent",flat:""}},[r("v-card-title",{staticClass:"py-2"},[r("div",{staticClass:"text-body-2"},[e._v(e._s(e.samples.length)+" Images uploaded")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[r("v-icon",e._g(e._b({staticClass:"mr-3",attrs:{icon:""},on:{click:e.handleOnExport}},"v-icon",o,!1),n),[e._v("\n                mdi-printer-outline\n              ")])]}}],null,!1,4217810431)},[e._v(" "),r("span",[e._v("Export")])]),e._v(" "),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[r("v-icon",e._g(e._b({attrs:{icon:""},on:{click:e.handleOnResetSample}},"v-icon",o,!1),n),[e._v("\n                mdi-refresh\n              ")])]}}],null,!1,283694463)},[e._v(" "),r("span",[e._v("Reset")])]),e._v(" "),r("v-btn",{class:["ml-2",e.hideOptions?"page-btn--up":"page-btn--down"],attrs:{icon:"",small:""},on:{click:function(t){e.hideOptions=!e.hideOptions}}},[r("v-icon",[e._v("mdi-chevron-down")])],1)],1),e._v(" "),r("v-card-text",{staticClass:"pa-0"},[r("div",{class:["page-filter--expand",{"page-filter--collapse":e.hideOptions}]},[r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"6"}},[r("div",{staticClass:"mb-1"},[e._v("Localization threshold ("+e._s(e._f("decimal")(e.minimumLocalizationThreshold))+")")]),e._v(" "),r("v-slider",{attrs:{min:"0",max:"1",step:"0.1",dense:"","hide-details":""},model:{value:e.minimumLocalizationThreshold,callback:function(t){e.minimumLocalizationThreshold=t},expression:"minimumLocalizationThreshold"}})],1),e._v(" "),r("v-col",{attrs:{cols:"6"}},[r("div",{staticClass:"mb-1"},[e._v("Similarity threshold ("+e._s(e._f("decimal")(e.minimumSimilarityThreshold))+")")]),e._v(" "),r("v-slider",{attrs:{min:"0",max:"1",step:"0.1",dense:"","hide-details":""},model:{value:e.minimumSimilarityThreshold,callback:function(t){e.minimumSimilarityThreshold=t},expression:"minimumSimilarityThreshold"}})],1)],1),e._v(" "),r("v-row",{attrs:{dense:""}},[r("v-col",[r("div",{staticClass:"mb-1"},[e._v("Labels")]),e._v(" "),r("v-chip-group",{attrs:{column:"",multiple:""},model:{value:e.viewLabels,callback:function(t){e.viewLabels=t},expression:"viewLabels"}},[e._l(e.databases,(function(t){return[r("v-chip",{key:"lb-"+t.id,attrs:{value:t.id,color:t.color,filter:"",outlined:"",small:""}},[e._v("\n                      "+e._s(t.label)+"\n                    ")])]}))],2)],1)],1)],1)])],1)],1)]):e._e(),e._v(" "),r("div",{staticClass:"page-workspace pt-0"},[e.sampleUploaded?r("div",{staticClass:"page-workspace-list",style:{maxHeight:e.contentHeight+"px"}},[e._l(e.samples,(function(t){return[r("div",{key:"sample-"+t.id,staticClass:"page-workspace-item"},[r("v-card",{staticClass:"page-workspace-card"},[r("v-card-text",[r("div",{staticClass:"page-workspace-card__content",style:{display:e.screenWidth>560?"flex":"block"}},[r("div",{staticClass:"page-workspace-card__canvas"},[r("bounding-box-canvas",{ref:"image_canvas_"+t.id,refInFor:!0,attrs:{src:t.image,bboxes:e.filterBoxes(t.boxes),width:e.canvasWidth,height:e.canvasHeight}})],1),e._v(" "),r("div",{staticClass:"page-workspace-card__output"},[r("div",{class:["page-workspace-boxes-results",e.screenWidth>560?"pl-4":"pt-4"],style:{maxHeight:e.canvasHeight+"px"}},[r("div",{staticClass:"page-workspace-boxes__title"},[e._v("Predictions")]),e._v(" "),r("div",{staticClass:"page-workspace-boxes__subtitle",staticStyle:{"margin-bottom":"8px"}},[e._v(e._s(e.filterBoxes(t.boxes).length)+" objects")]),e._v(" "),e._l(e.filterBoxes(t.boxes),(function(n,i){return[r("div",{key:"output-"+t.id+"-"+i,staticClass:"page-workspace-boxes__item"},[r("div",{staticClass:"page-workspace-boxes__color-box",style:{backgroundColor:n.color}},[e._v("\n                          "+e._s("P"+(n.$index+1))+"\n                        ")]),e._v(" "),r("div",{staticClass:"page-workspace-boxes__label"},[e._v("\n                          "+e._s(n.object)+"\n                        ")]),e._v(" "),r("div",{staticClass:"page-workspace-boxes__percent"},[r("v-progress-linear",{attrs:{value:100*n.score,height:"10"}})],1),e._v(" "),r("div",{staticClass:"page-workspace-boxes__score"},[e._v("\n                          "+e._s(Math.ceil(100*n.score))+"%\n                        ")])])]}))],2)])])])],1)],1)]}))],2):r("div",{staticClass:"page-workspace-item"},[r("v-card",{staticClass:"mt-4"},[r("v-card-title",{staticClass:"py-2"},[e._v("Preview")]),e._v(" "),r("v-divider"),e._v(" "),e.databases.length<1?r("v-card-text",[e._v("\n          You must add artwork on top panel before you can preview it here\n        ")]):r("v-card-text",[r("upload-image-field",{ref:"sample_upload",staticStyle:{width:"100%"},attrs:{accept:"image/jpeg",multiple:""},on:{change:e.handleOnSampleUpload},model:{value:e.uploads,callback:function(t){e.uploads=t},expression:"uploads"}})],1)],1)],1)]),e._v(" "),r("div",{staticClass:"page-footer"},[r("div",{staticClass:"page-footer__text"},[e._v("version: "+e._s(e.modelVersion))])]),e._v(" "),r("v-dialog",{attrs:{"max-width":"480",persistent:""},model:{value:e.uploadDatabaseDialog,callback:function(t){e.uploadDatabaseDialog=t},expression:"uploadDatabaseDialog"}},[r("v-card",[r("v-card-title",[e._v("Add new artwork")]),e._v(" "),r("v-card-text",{staticClass:"pb-0"},[r("v-form",{ref:"database_form",on:{submit:function(e){e.preventDefault()}},model:{value:e.createDatabaseValid,callback:function(t){e.createDatabaseValid=t},expression:"createDatabaseValid"}},[r("v-text-field",{attrs:{label:"Label",rules:[function(e){return!!e||"Enter label name"},e.chkLabelDuplicate],dense:"",outlined:""},model:{value:e.createDatabase.label,callback:function(t){e.$set(e.createDatabase,"label",t)},expression:"createDatabase.label"}}),e._v(" "),r("upload-image-field",{ref:"upload_database",staticStyle:{width:"100%"},attrs:{rules:[function(e){return!!e||"Enter image"}],"add-text":"Click to upload",accept:"image/jpeg"},model:{value:e.createDatabase.img,callback:function(t){e.$set(e.createDatabase,"img",t)},expression:"createDatabase.img"}})],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.uploadDatabaseDialog=!1}}},[e._v("cancel")]),e._v(" "),r("v-btn",{attrs:{color:"primary",text:""},on:{click:e.handleOnAddDatabase}},[e._v("add")])],1)],1)],1),e._v(" "),r("v-overlay",{model:{value:e.loading.show,callback:function(t){e.$set(e.loading,"show",t)},expression:"loading.show"}},[r("div",{staticClass:"page__overlay-box"},[e._v(e._s(e.loading.message))])]),e._v(" "),r("v-dialog",{attrs:{"max-width":"640",persistent:""},model:{value:e.hasProblem,callback:function(t){e.hasProblem=t},expression:"hasProblem"}},[r("v-card",[r("v-card-text",{staticClass:"py-4 text-center"},[r("div",{staticClass:"py-3"},[r("v-icon",{attrs:{color:"primary",size:"48"}},[e._v("mdi-connection")])],1),e._v(" "),r("div",{staticClass:"text-h6"},[e._v("Something went wrong...")]),e._v(" "),r("div",{staticClass:"text-body-2 pb-6"},[e._v("\n          We are working on fixing the problem Please try again.\n        ")]),e._v(" "),r("v-btn",{attrs:{color:"primary",plain:""},on:{click:e.handleOnReloadPage}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-refresh")]),e._v("\n          Refresh Page\n        ")],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"page-temp-upload"},[r("bounding-box-canvas",{ref:"temp_canvas",attrs:{src:e.tempImage,bboxes:[],width:e.canvasWidth,height:e.canvasHeight}})],1),e._v(" "),r("client-only",[r("vue-html2pdf",{ref:"export_pdf",attrs:{"show-layout":!1,"float-layout":!0,"enable-download":!1,"preview-modal":!1,"pdf-quality":4,"manual-pagination":!0,"paginate-elements-by-height":1100,"pdf-content-width":"800px","pdf-format":"a4","pdf-orientation":"portrait","html-to-pdf-options":e.htmlToPdfOptions},on:{beforeDownload:e.handleOnPdfGenerate}},[r("offline-ads-pdf-content",{attrs:{slot:"pdf-content",title:e.title,"min-localization":e.minimumLocalizationThreshold,"min-similarity":e.minimumSimilarityThreshold,items:e.reportItems},slot:"pdf-content"})],1)],1)],1)}),[],!1,null,"495fc3fa",null);t.default=component.exports;w()(component,{BoundingBoxCanvas:r(898).default,UploadImageField:r(787).default,OfflineAdsPdfContent:r(899).default}),w()(component,{VBtn:O.a,VCard:k.a,VCardActions:C.a,VCardText:C.b,VCardTitle:C.c,VChip:E,VChipGroup:te,VCol:ae.a,VDialog:ie.a,VDivider:re.a,VForm:ne.a,VIcon:oe.a,VImg:se.a,VList:le.a,VListItem:ce.a,VListItemTitle:de.b,VMenu:pe.a,VOverlay:ue.a,VProgressLinear:fe.a,VRow:he.a,VSlider:ve.a,VSpacer:ge.a,VTextField:me.a,VTooltip:be.a})},746:function(e,t,r){var content=r(774);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(56).default)("5d7ada4c",content,!0,{sourceMap:!1})},766:function(e,t,r){var content=r(812);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(56).default)("190ccb28",content,!0,{sourceMap:!1})},773:function(e,t,r){"use strict";r(746)},774:function(e,t,r){var n=r(55)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Kanit:wght@100;300;400;500;600;700&display=swap);"]),n.push([e.i,".upload-field[data-v-b5ade68e]{position:relative}.upload-field__content[data-v-b5ade68e]{border:thin dashed #1967d2!important;border-radius:4px;padding:8px;display:flex;align-items:center;justify-content:center;position:relative;margin-bottom:4px;width:100%;height:240px;background-color:#e8f0fe;overflow:hidden;z-index:1;color:#1967d2!important}.upload-field__content *[data-v-b5ade68e]{pointer-events:none}.upload-field__content>input[data-v-b5ade68e]{display:none}.upload-field__drop-zone[data-v-b5ade68e]{text-align:center}.upload-field--error[data-v-b5ade68e]{border:2px solid #ff5252!important}.upload-field__disabled[data-v-b5ade68e]{position:absolute;top:0;bottom:0;left:0;right:0}.upload-field__details[data-v-b5ade68e]{margin-bottom:8px;padding:0 12px;display:flex;flex:1 0 auto;max-width:100%;min-height:14px;overflow:hidden}.upload-field__details--hide[data-v-b5ade68e]{display:none!important}.upload-field--readonly[data-v-b5ade68e]{cursor:auto}.upload-field:hover .upload-field__image--remove[data-v-b5ade68e]{display:flex}.upload-field:hover .upload-field__image--remove>*[data-v-b5ade68e]{pointer-events:auto}.upload-field__image[data-v-b5ade68e],.upload-field__image--remove[data-v-b5ade68e]{position:absolute;left:0;right:0;top:0;bottom:0}.upload-field__image--remove[data-v-b5ade68e]{display:none;z-index:1;background-color:rgba(0,0,0,.25);align-items:center;justify-content:center}.upload-field__normal[data-v-b5ade68e]{text-align:center}.upload-field__normal>i[data-v-b5ade68e]{color:#1967d2}.upload-field__normal>div>div[data-v-b5ade68e]{display:inline-block;text-decoration:underline;cursor:pointer;pointer-events:auto}",""]),e.exports=n},775:function(e,t,r){var content=r(815);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(56).default)("67a3458e",content,!0,{sourceMap:!1})},783:function(e,t,r){"use strict";r.r(t),r.d(t,"cosineSimilarity",(function(){return o}));var n=r(786),o=function(a,b){return n.a.cosine(a,b)}},787:function(e,t,r){"use strict";r.r(t);r(94),r(69),r(129),r(95),r(37),r(130),r(137),r(97);var n=r(51),o=r(63),l=r(49),c=(r(188),r(25),r(38),r(150),r(57),r(159),r(151),r(119),r(136),r(813)),d=r.n(c);function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var v={name:"UploadImageField",extends:r(744).a,inject:{form:{default:null}},props:{value:{type:Array,default:function(){return[]}},accept:{type:String,default:"image/png,image/jpg"},imageMaxDimension:{type:Array,default:function(){return[640,640]}},multiple:{type:Boolean,default:!1}},data:function(){return{localVal:[],raws:[],fileCompressor:null,isDragging:!1,processing:!1}},watch:{value:function(e){this.localVal=e||[]}},mounted:function(){this.valid=!0,this.localVal=this.value},methods:{validate:function(e,t){if(e){var r=[];t=t||this.localVal,e&&(this.hasInput=this.hasFocused=!0);var n,o=f(this.rules);try{for(o.s();!(n=o.n()).done;){var c=n.value,d="function"==typeof c?c(t):c;"string"==typeof d?r.push(d):"boolean"!=typeof d&&console.error("Rules should return a string or boolean, received '".concat(Object(l.a)(d),"' instead"),this)}}catch(e){o.e(e)}finally{o.f()}return this.errorBucket=r,this.valid=0===r.length,this.valid}},reset:function(){this.valid=!0,this.localVal=[],this.raws=[],this.errorBucket=[],this.$emit("input",this.localVal)},resetValidation:function(){this.valid=!0,this.errorBucket=[]},getRaws:function(){return this.raws},handelOnChangeFile:function(){this.onConvertImage()},handelOnDrop:function(e){if(e.preventDefault(),!(this.disabled||this.localVal.length>0)){this.isDragging=!1;var t=e.dataTransfer.files;this.$refs.picture_upload.files=t,this.onConvertImage()}},handelOnDragEnter:function(e){e.preventDefault(),this.disabled||this.localVal.length>0||(this.isDragging=!0)},handleOnDragLeave:function(e){this.disabled||this.localVal.length>0||(this.isDragging=!1)},handleDragOver:function(e){this.disabled||this.localVal.length>0||e.preventDefault()},parseImage:function(e){var t=this;return new Promise((function(r,n){var o,l=function(e){r([e.target.result,o])};t.fileCompressor=new d.a(e,{convertSize:5e6,maxWidth:t.imageMaxDimension[0],maxHeight:t.imageMaxDimension[1],success:function(e){var t=new FileReader;t.onload=l,o=e,t.readAsDataURL(o)},error:n})}))},onConvertImage:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,l,c,d,h,v,m,x,img,_;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,r=e.$refs.picture_upload.files,e.multiple||(r=[r[0]]),o=e.accept.split(",").map((function(e){return e.trim()})).filter((function(e){return!!e})),l=[],c=[],e.processing=!0,d=f(r),t.prev=8,d.s();case 10:if((h=d.n()).done){t.next=24;break}if(v=h.value,o.includes(v.type)){t.next=14;break}throw new Error("Some file not support");case 14:return t.next=16,e.parseImage(v);case 16:m=t.sent,x=Object(n.a)(m,2),img=x[0],_=x[1],c.push(img),l.push(_);case 22:t.next=10;break;case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(8),d.e(t.t0);case 29:return t.prev=29,d.f(),t.finish(29);case 32:e.localVal=c,e.raws=l,e.$refs.picture_upload.value=null,e.$refs.picture_upload.type="text",e.$refs.picture_upload.type="file",e.$emit("input",e.localVal),e.$emit("change",e.localVal,e.raws),e.validate(!0,e.localVal),t.next=47;break;case 42:t.prev=42,t.t1=t.catch(0),console.error(t.t1),e.errorBucket[0]=t.t1.message,e.valid=!1;case 47:return t.prev=47,e.processing=!1,t.finish(47);case 50:case"end":return t.stop()}}),t,null,[[0,42,47,50],[8,26,29,32]])})))()},handelOnRemove:function(){this.localVal=[],this.raws=[],this.$emit("input",this.localVal),this.$emit("change",this.localVal,this.raws),this.validate(!0,this.localVal)}}},m=(r(773),r(138)),x=r(160),_=r.n(x),y=r(384),w=r(381),O=r(351),k=r(745),component=Object(m.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"upload-field",attrs:{id:e.id}},[r("div",{class:["upload-field__content",{"upload-field--error":!e.valid,"upload-field--disabled":e.disabled},{"upload-field-drop":e.isDragging}],attrs:{id:"upload_content"},on:{drop:e.handelOnDrop,dragover:e.handleDragOver,dragenter:e.handelOnDragEnter,dragleave:e.handleOnDragLeave}},[r("input",{ref:"picture_upload",attrs:{type:"file",alt:"",title:"",accept:e.accept,multiple:e.multiple},on:{input:e.handelOnChangeFile}}),e._v(" "),e.multiple||1!==e.localVal.length?e.isDragging?r("div",{staticClass:"upload-field__drop-zone"},[r("v-avatar",{attrs:{color:"#1967d2"}},[r("v-icon",{attrs:{dark:""}},[e._v("mdi-tray-arrow-up")])],1),e._v(" "),r("div",{staticClass:"mt-4 text-subtitle-1 font-weight-light"},[e._v("Drop your image to here")])],1):r("div",{staticClass:"upload-field__normal"},[r("v-icon",{attrs:{size:"32"}},[e._v("mdi-image")]),e._v(" "),r("div",{staticClass:"text-subtitle-1 font-weight-light"},[e._v("Drag and drop or "),r("div",{on:{click:function(t){return e.$refs.picture_upload.click()}}},[e._v("browse")])])],1):r("div",{staticClass:"upload-field__image"},[r("div",{staticClass:"upload-field__image--remove"},[r("v-icon",{attrs:{color:"white"},on:{click:e.handelOnRemove}},[e._v("mdi-delete")])],1),e._v(" "),e.multiple||1!==e.localVal.length?e._e():r("v-img",{staticClass:"grey lighten-4",attrs:{src:e.localVal[0],width:"100%",height:"100%",contain:""}})],1)]),e._v(" "),r("div",{class:["upload-field__details",{"upload-field__details--hide":e.hideDetails}]},[e.errorBucket.length<1&&e.hint&&(e.persistentHint||e.isFocused)?r("VMessages",{attrs:{value:[e.hint]}}):e._e(),e._v(" "),r("VMessages",{attrs:{value:e.errorBucket,color:"error"}})],1)])}),[],!1,null,"b5ade68e",null);t.default=component.exports;_()(component,{VAvatar:y.a,VIcon:w.a,VImg:O.a,VMessages:k.a})},811:function(e,t,r){"use strict";r(766)},812:function(e,t,r){var n=r(55)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Kanit:wght@100;300;400;500;600;700&display=swap);"]),n.push([e.i,".bbox__container[data-v-1912ae30]{display:flex;align-items:center;justify-content:center;background-color:rgba(0,0,0,.04)}",""]),e.exports=n},814:function(e,t,r){"use strict";r(775)},815:function(e,t,r){var n=r(55)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Kanit:wght@100;300;400;500;600;700&display=swap);"]),n.push([e.i,'.report[data-v-3f3a9c26]{padding-left:6mm;padding-right:6mm}.report-item[data-v-3f3a9c26]{padding-top:3mm;padding-bottom:6mm;height:297mm;overflow:hidden}.report__page-break[data-v-3f3a9c26]{page-break-inside:avoid}.report-header[data-v-3f3a9c26]{display:flex;align-items:center;margin-bottom:16px}.report-header__title[data-v-3f3a9c26]{font-size:1.2rem}.report-header__key[data-v-3f3a9c26],.report-header__title[data-v-3f3a9c26]{font-family:"Kanit","Roboto",sans-serif;font-weight:500}.report-header__key[data-v-3f3a9c26]{font-size:.8rem}.report-header__value[data-v-3f3a9c26]{font-family:"Kanit","Roboto",sans-serif;font-weight:300;font-size:.8rem}.report__image[data-v-3f3a9c26]{width:300px;aspect-ratio:4/3;max-height:300px;background-repeat:no-repeat;background-size:contain}.report-table[data-v-3f3a9c26]{width:100%;border-collapse:collapse}.report-table td[data-v-3f3a9c26],.report-table th[data-v-3f3a9c26]{padding:8px;font-family:"Kanit","Roboto",sans-serif}.report-table th[data-v-3f3a9c26]{font-size:1rem;font-weight:500;background-color:#ddd}.report-table td[data-v-3f3a9c26]{vertical-align:top;font-weight:300}.report-table>tbody>tr>td[data-v-3f3a9c26]:first-child{text-align:center}.report-box[data-v-3f3a9c26]{display:flex}.report-box__color-box[data-v-3f3a9c26]{width:22px;height:22px;min-height:100%;margin-right:8px;font-size:.65rem;display:flex;align-items:center;justify-content:center;color:#fff}.report-box>*[data-v-3f3a9c26]{flex:1;font-family:"Kanit","Roboto",sans-serif}.report-box[data-v-3f3a9c26]>:first-child{flex:0;min-width:28px}.report-box[data-v-3f3a9c26]>:last-child{flex:0;min-width:40px;text-align:right}td>.report-box+.report-box[data-v-3f3a9c26]{margin-top:8px}@page{size:A4;margin:0}@media print{.report[data-v-3f3a9c26]{width:210mm;height:297mm}}',""]),e.exports=n},829:function(e,t){},830:function(e,t){},839:function(e,t){},840:function(e,t){},859:function(e,t){},861:function(e,t){},864:function(e,t){},865:function(e,t){},870:function(e,t){},877:function(e,t){},887:function(e,t,r){var content=r(1001);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(56).default)("72ed8449",content,!0,{sourceMap:!1})},898:function(e,t,r){"use strict";r.r(t);var n=r(63);r(188),r(65),r(150),r(94),r(25),r(69),r(129),r(95),r(57),r(37),r(130),r(137),r(97);function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){d=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(d)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var c={name:"BoundingBoxCanvas",props:{width:{type:Number,default:100},height:{type:Number,default:100},src:{type:String,default:null},bboxes:{type:Array,default:function(){return[]}}},data:function(){return{stageConfig:{width:100,height:100,scaleX:.5,scaleY:.5},imageConfig:{image:null,width:100,height:100,x:0,y:0},shapes:[],imageFactor:1}},watch:{src:function(e){this.loadImage(e)},bboxes:function(e){this.loadBox(e)},width:function(e){this.updateStageSize()}},mounted:function(){this.loadImage(this.src),this.loadBox(this.bboxes)},methods:{loadImage:function(e){var t=this;if(e){var image=new Image;image.onload=function(){t.imageConfig.image=image,t.imageConfig.width=image.width,t.imageConfig.height=image.height,t.updateStageSize()},image.src=e}},loadBox:function(e){if(Array.isArray(e)){var t=e.map((function(e,i){return{rotation:0,x:e.rectangle.x,y:e.rectangle.y,width:e.rectangle.width,height:e.rectangle.height,stroke:e.color,fill:e.color,strokeWidth:5,opacity:.6,$index:e.$index,$id:e.id}}));this.shapes=t}},updateStageSize:function(){var e=Math.min(this.width/this.imageConfig.width,this.height/this.imageConfig.height);this.imageFactor=e;var t=this.calculateAspectRatioFit(this.imageConfig.width,this.imageConfig.height,this.width,this.height);this.stageConfig.width=t.width,this.stageConfig.height=t.height,this.stageConfig.scaleX=1*e,this.stageConfig.scaleY=1*e},calculateAspectRatioFit:function(e,t,r,n){var o=Math.min(r/e,n/t);return{width:e*o,height:t*o}},getImageDataBoxes:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,l,c,d,f,h,v,m,x,_,y,img;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=t.$refs.background.getNode(),l=n.width()/t.stageConfig.width,c=n.height()/t.stageConfig.height,d=[],f=o(e),r.prev=5,f.s();case 7:if((h=f.n()).done){r.next=19;break}return v=h.value,m=parseInt(Math.round(v.rectangle.x/l)),x=parseInt(Math.round(v.rectangle.y/c)),_=parseInt(Math.round(v.rectangle.width/l)),y=parseInt(Math.round(v.rectangle.height/c)),r.next=15,n.toImage({x:m,y:x,width:_,height:y,mimeType:"image/jpeg"});case 15:img=r.sent,d.push(img);case 17:r.next=7;break;case 19:r.next=24;break;case 21:r.prev=21,r.t0=r.catch(5),f.e(r.t0);case 24:return r.prev=24,f.f(),r.finish(24);case 27:return r.abrupt("return",d);case 28:case"end":return r.stop()}}),r,null,[[5,21,24,27]])})))()},getDataURL:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,img;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$refs.stage.getNode(),t.next=3,r.toDataURL({x:0,y:0,width:e.stageConfig.width,height:e.stageConfig.height,mimeType:"image/jpeg"});case 3:return img=t.sent,t.abrupt("return",img);case 5:case"end":return t.stop()}}),t)})))()},reset:function(){this.imageConfig.image=null,this.shapes=[]}}},d=(r(811),r(138)),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bbox__container",style:{width:e.width+"px",height:e.height+"px"}},[r("v-stage",{ref:"stage",staticClass:"bbox__stage",attrs:{config:e.stageConfig}},[r("v-layer",{ref:"layer"},[r("v-image",{ref:"background",attrs:{config:e.imageConfig}}),e._v(" "),e._l(e.shapes,(function(t){return[r("v-rect",{key:"shape-"+t.$id,attrs:{config:t}}),e._v(" "),r("v-text",{key:"text-"+t.$id,attrs:{config:{text:"P"+(t.$index+1),x:t.x+4,y:t.y+4,fontSize:14,fill:"#ffffff"}}})]}))],2)],1)],1)}),[],!1,null,"1912ae30",null);t.default=component.exports},899:function(e,t,r){"use strict";r.r(t);r(65),r(94);var n={name:"OfflineAdsPdfContent",props:{title:{type:String,default:""},items:{type:Array,default:function(){return[]}},minLocalization:{type:Number,required:!0,default:0},minSimilarity:{type:Number,required:!0,default:0}},data:function(){return{itemsPerPage:4,pages:[]}},watch:{items:{deep:!0,handler:function(e){this.parseItems(e||[])}}},methods:{parseItems:function(e){this.pages=[];for(var i=0;i<e.length;i+=this.itemsPerPage)this.pages.push(e.slice(i,i+this.itemsPerPage));console.log(this.pages)}}},o=(r(814),r(138)),l=r(160),c=r.n(l),d=r(733),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"report"},[e._l(e.pages,(function(t,n){return[r("section",{key:"page-"+n,staticClass:"report-item"},[r("div",{staticClass:"report-header"},[r("div",{staticClass:"report-header__title"},[e._v(e._s(e.title))]),e._v(" "),r("v-spacer"),e._v(" "),r("div",{staticClass:"report-header__key"},[e._v("minimum localization: "),r("span",{staticClass:"report-header__value"},[e._v(e._s(e.minLocalization))])]),e._v(" "),r("div",{staticClass:"report-header__key",staticStyle:{"padding-left":"8px"}},[e._v("minimum similarity: "),r("span",{staticClass:"report-header__value"},[e._v(e._s(e.minSimilarity))])])],1),e._v(" "),r("table",{staticClass:"report-table"},[e._m(0,!0),e._v(" "),r("tbody",[e._l(t,(function(t){return[r("tr",{key:"report-"+t.id},[r("td",{staticStyle:{width:"40px"}},[e._v(e._s(t.no))]),e._v(" "),r("td",{staticStyle:{width:"300px"}},[r("div",{staticClass:"report__image",style:{backgroundImage:"url("+t.img+")"}})]),e._v(" "),r("td",[e._l(t.boxes,(function(n){return[r("div",{key:"box-"+t.id+n.id,staticClass:"report-box"},[r("div",[r("div",{staticClass:"report-box__color-box",style:{backgroundColor:n.color}},[e._v("\n                        "+e._s("P"+(n.$index+1))+"\n                      ")])]),e._v(" "),r("div",[e._v(e._s(n.object))]),e._v(" "),r("div",[e._v(e._s(Math.ceil(100*n.score))+"%")])])]}))],2)])]}))],2)])]),e._v(" "),n<t.length-1?r("div",{key:"page-break-"+n,staticClass:"report__page-break"}):e._e()]}))],2)}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("No.")]),e._v(" "),r("th",[e._v("Image")]),e._v(" "),r("th",[e._v("Results")])])])}],!1,null,"3f3a9c26",null);t.default=component.exports;c()(component,{VSpacer:d.a})}}]);